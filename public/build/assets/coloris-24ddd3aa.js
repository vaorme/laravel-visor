/*!
 * Copyright (c) 2021 Momo Bassit.
 * Licensed under the MIT License (MIT)
 * https://github.com/mdbassit/Coloris
 */(function(T,u,m,E){var x,p,w,k,b,q,L,B,M,H,z,O,A,d,F,D,J,Y=u.createElement("canvas").getContext("2d"),N={r:0,g:0,b:0,h:0,s:0,v:0,a:1},a={el:"[data-coloris]",parent:"body",theme:"default",themeMode:"light",rtl:!1,wrap:!0,margin:2,format:"hex",formatToggle:!1,swatches:[],swatchesOnly:!1,alpha:!0,forceAlpha:!1,focusInput:!0,selectInput:!1,inline:!1,defaultColor:"#000000",clearButton:!1,clearLabel:"Clear",closeButton:!1,closeLabel:"Close",onChange:function(){return E},a11y:{open:"Open color picker",close:"Close color picker",clear:"Clear the selected color",marker:"Saturation: {s}. Brightness: {v}.",hueSlider:"Hue slider",alphaSlider:"Opacity slider",input:"Color value field",format:"Color format",swatch:"Color swatch",instruction:"Saturation and brightness selector. Use up, down, left and right arrow keys to select."}},j={},Q="",R={},W=!1;function P(e){if(typeof e=="object")for(var t in e)switch(t){case"el":Z(e.el),e.wrap!==!1&&X(e.el);break;case"parent":(x=u.querySelector(e.parent))&&(x.appendChild(p),a.parent=e.parent,x===u.body&&(x=E));break;case"themeMode":a.themeMode=e.themeMode,e.themeMode==="auto"&&T.matchMedia&&T.matchMedia("(prefers-color-scheme: dark)").matches&&(a.themeMode="dark");case"theme":e.theme&&(a.theme=e.theme),p.className="clr-picker clr-"+a.theme+" clr-"+a.themeMode,a.inline&&U();break;case"rtl":a.rtl=!!e.rtl,u.querySelectorAll(".clr-field").forEach(function(s){return s.classList.toggle("clr-rtl",a.rtl)});break;case"margin":e.margin*=1,a.margin=(isNaN(e.margin)?a:e).margin;break;case"wrap":e.el&&e.wrap&&X(e.el);break;case"formatToggle":a.formatToggle=!!e.formatToggle,v("clr-format").style.display=a.formatToggle?"block":"none",a.formatToggle&&(a.format="auto");break;case"swatches":Array.isArray(e.swatches)&&function(){var s=[];e.swatches.forEach(function(c,h){s.push('<button type="button" id="clr-swatch-'+h+'" aria-labelledby="clr-swatch-label clr-swatch-'+h+'" style="color: '+c+';">'+c+"</button>")}),v("clr-swatches").innerHTML=s.length?"<div>"+s.join("")+"</div>":"",a.swatches=e.swatches.slice()}();break;case"swatchesOnly":a.swatchesOnly=!!e.swatchesOnly,p.setAttribute("data-minimal",a.swatchesOnly);break;case"alpha":a.alpha=!!e.alpha,p.setAttribute("data-alpha",a.alpha);break;case"inline":a.inline=!!e.inline,p.setAttribute("data-inline",a.inline),a.inline&&(r=e.defaultColor||a.defaultColor,F=ee(r),U(),G(r));break;case"clearButton":typeof e.clearButton=="object"&&(e.clearButton.label&&(a.clearLabel=e.clearButton.label,B.innerHTML=a.clearLabel),e.clearButton=e.clearButton.show),a.clearButton=!!e.clearButton,B.style.display=a.clearButton?"block":"none";break;case"clearLabel":a.clearLabel=e.clearLabel,B.innerHTML=a.clearLabel;break;case"closeButton":a.closeButton=!!e.closeButton,a.closeButton?p.insertBefore(M,q):q.appendChild(M);break;case"closeLabel":a.closeLabel=e.closeLabel,M.innerHTML=a.closeLabel;break;case"a11y":var l,r,o=e.a11y,n=!1;if(typeof o=="object")for(var i in o)o[i]&&a.a11y[i]&&(a.a11y[i]=o[i],n=!0);n&&(l=v("clr-open-label"),r=v("clr-swatch-label"),l.innerHTML=a.a11y.open,r.innerHTML=a.a11y.swatch,M.setAttribute("aria-label",a.a11y.close),B.setAttribute("aria-label",a.a11y.clear),H.setAttribute("aria-label",a.a11y.hueSlider),O.setAttribute("aria-label",a.a11y.alphaSlider),L.setAttribute("aria-label",a.a11y.input),w.setAttribute("aria-label",a.a11y.instruction));break;default:a[t]=e[t]}}function ne(e,t){typeof e=="string"&&typeof t=="object"&&(j[e]=t,W=!0)}function oe(e){delete j[e],Object.keys(j).length===0&&(W=!1,e===Q&&V())}function ce(e){if(W){var t,l=["el","wrap","rtl","inline","defaultColor","a11y"];for(t in j)if(function(r){var o=j[r];if(e.matches(r)){for(var n in Q=r,R={},l.forEach(function(i){return delete o[i]}),o)R[n]=Array.isArray(a[n])?a[n].slice():a[n];return P(o),"break"}}(t)==="break")break}}function V(){0<Object.keys(R).length&&(P(R),Q="",R={})}function Z(e){f(u,"click",e,function(t){a.inline||(ce(t.target),d=t.target,D=d.value,F=ee(D),p.classList.add("clr-open"),U(),G(D),(a.focusInput||a.selectInput)&&(L.focus({preventScroll:!0}),L.setSelectionRange(d.selectionStart,d.selectionEnd)),a.selectInput&&L.select(),(J||a.swatchesOnly)&&re().shift().focus(),d.dispatchEvent(new Event("open",{bubbles:!0})))}),f(u,"input",e,function(t){var l=t.target.parentNode;l.classList.contains("clr-field")&&(l.style.color=t.target.value)})}function U(){var e,t,l,r,o=x,n=T.scrollY,i=p.offsetWidth,s=p.offsetHeight,c={left:!1,top:!1},h={x:0,y:0};o&&(l=T.getComputedStyle(o),e=parseFloat(l.marginTop),r=parseFloat(l.borderTopWidth),(h=o.getBoundingClientRect()).y+=r+n),a.inline||(l=(t=d.getBoundingClientRect()).x,r=n+t.y+t.height+a.margin,o?(l-=h.x,r-=h.y,l+i>o.clientWidth&&(l+=t.width-i,c.left=!0),r+s>o.clientHeight-e&&s+a.margin<=t.top-(h.y-n)&&(r-=t.height+s+2*a.margin,c.top=!0),r+=o.scrollTop):(l+i>u.documentElement.clientWidth&&(l+=t.width-i,c.left=!0),r+s-n>u.documentElement.clientHeight&&s+a.margin<=t.top&&(r=n+t.y-s-a.margin,c.top=!0)),p.classList.toggle("clr-left",c.left),p.classList.toggle("clr-top",c.top),p.style.left=l+"px",p.style.top=r+"px",h.x+=p.offsetLeft,h.y+=p.offsetTop),k={width:w.offsetWidth,height:w.offsetHeight,x:w.offsetLeft+h.x,y:w.offsetTop+h.y}}function X(e){u.querySelectorAll(e).forEach(function(t){var l,r,o=t.parentNode;o.classList.contains("clr-field")||(l=u.createElement("div"),r="clr-field",(a.rtl||t.classList.contains("clr-rtl"))&&(r+=" clr-rtl"),l.innerHTML='<button type="button" aria-labelledby="clr-open-label"></button>',o.insertBefore(l,t),l.setAttribute("class",r),l.style.color=t.value,l.appendChild(t))})}function I(e){var t;d&&!a.inline&&(t=d,e&&(d=E,D!==t.value&&(t.value=D,t.dispatchEvent(new Event("input",{bubbles:!0})))),setTimeout(function(){D!==t.value&&t.dispatchEvent(new Event("change",{bubbles:!0}))}),p.classList.remove("clr-open"),W&&V(),t.dispatchEvent(new Event("close",{bubbles:!0})),a.focusInput&&t.focus({preventScroll:!0}),d=E)}function G(l){var t=function(r){var o;return Y.fillStyle="#000",Y.fillStyle=r,(r=/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i.exec(Y.fillStyle))?(o={r:+r[3],g:+r[4],b:+r[5],a:+r[6]}).a=+o.a.toFixed(2):(r=Y.fillStyle.replace("#","").match(/.{2}/g).map(function(n){return parseInt(n,16)}),o={r:r[0],g:r[1],b:r[2],a:1}),o}(l),l=function(r){var o=r.r/255,n=r.g/255,i=r.b/255,s=m.max(o,n,i),y=m.min(o,n,i),c=s-y,h=s,g=0,y=0;return c&&(s===o&&(g=(n-i)/c),s===n&&(g=2+(i-o)/c),s===i&&(g=4+(o-n)/c),s&&(y=c/s)),{h:(g=m.floor(60*g))<0?g+360:g,s:m.round(100*y),v:m.round(100*h),a:r.a}}(t);ae(l.s,l.v),K(t,l),H.value=l.h,p.style.color="hsl("+l.h+", 100%, 50%)",z.style.left=l.h/360*100+"%",b.style.left=k.width*l.s/100+"px",b.style.top=k.height-k.height*l.v/100+"px",O.value=100*l.a,A.style.left=100*l.a+"%"}function ee(e){return e=e.substring(0,3).toLowerCase(),e==="rgb"||e==="hsl"?e:"hex"}function S(e){e=e!==E?e:L.value,d&&(d.value=e,d.dispatchEvent(new Event("input",{bubbles:!0}))),a.onChange&&a.onChange.call(T,e,d),u.dispatchEvent(new CustomEvent("coloris:pick",{detail:{color:e,currentEl:d}}))}function te(e,t){e={h:+H.value,s:e/k.width*100,v:100-t/k.height*100,a:O.value/100},t=function(l){var r=l.s/100,o=l.v/100,n=r*o,i=l.h/60,s=n*(1-m.abs(i%2-1)),c=o-n;return n+=c,s+=c,r=m.floor(i)%6,o=[n,s,c,c,s,n][r],i=[s,n,n,s,c,c][r],r=[c,c,s,n,n,s][r],{r:m.round(255*o),g:m.round(255*i),b:m.round(255*r),a:l.a}}(e),ae(e.s,e.v),K(t,e),S()}function ae(e,t){var l=a.a11y.marker;e=+e.toFixed(1),t=+t.toFixed(1),l=(l=l.replace("{s}",e)).replace("{v}",t),b.setAttribute("aria-label",l)}function C(e){var l={pageX:((t=e).changedTouches?t.changedTouches[0]:t).pageX,pageY:(t.changedTouches?t.changedTouches[0]:t).pageY},t=l.pageX-k.x,l=l.pageY-k.y;x&&(l+=x.scrollTop),le(t,l),e.preventDefault(),e.stopPropagation()}function le(e,t){e=e<0?0:e>k.width?k.width:e,t=t<0?0:t>k.height?k.height:t,b.style.left=e+"px",b.style.top=t+"px",te(e,t),b.focus()}function K(e,t){t===void 0&&(t={});var l,r,o=a.format;for(l in e=e===void 0?{}:e)N[l]=e[l];for(r in t)N[r]=t[r];var n,i=function(c){var h=c.r.toString(16),g=c.g.toString(16),y=c.b.toString(16),$="";return c.r<16&&(h="0"+h),c.g<16&&(g="0"+g),c.b<16&&(y="0"+y),a.alpha&&(c.a<1||a.forceAlpha)&&(c=255*c.a|0,$=c.toString(16),c<16&&($="0"+$)),"#"+h+g+y+$}(N),s=i.substring(0,7);switch(b.style.color=s,A.parentNode.style.color=s,A.style.color=i,q.style.color=i,w.style.display="none",w.offsetHeight,w.style.display="",A.nextElementSibling.style.display="none",A.nextElementSibling.offsetHeight,A.nextElementSibling.style.display="",o==="mixed"?o=N.a===1?"hex":"rgb":o==="auto"&&(o=F),o){case"hex":L.value=i;break;case"rgb":L.value=(n=N,!a.alpha||n.a===1&&!a.forceAlpha?"rgb("+n.r+", "+n.g+", "+n.b+")":"rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")");break;case"hsl":L.value=(n=function(c){var h,g=c.v/100,y=g*(1-c.s/100/2);return 0<y&&y<1&&(h=m.round((g-y)/m.min(y,1-y)*100)),{h:c.h,s:h||0,l:m.round(100*y),a:c.a}}(N),!a.alpha||n.a===1&&!a.forceAlpha?"hsl("+n.h+", "+n.s+"%, "+n.l+"%)":"hsla("+n.h+", "+n.s+"%, "+n.l+"%, "+n.a+")")}u.querySelector('.clr-format [value="'+o+'"]').checked=!0}function ie(){var e=+H.value,t=+b.style.left.replace("px",""),l=+b.style.top.replace("px","");p.style.color="hsl("+e+", 100%, 50%)",z.style.left=e/360*100+"%",te(t,l)}function se(){var e=O.value/100;A.style.left=100*e+"%",K({a:e}),S()}function re(){return Array.from(p.querySelectorAll("input, button")).filter(function(e){return!!e.offsetWidth})}function v(e){return u.getElementById(e)}function f(e,t,l,r){var o=Element.prototype.matches||Element.prototype.msMatchesSelector;typeof l=="string"?e.addEventListener(t,function(n){o.call(n.target,l)&&r.call(n.target,n)}):(r=l,e.addEventListener(t,r))}function _(e,t){t=t!==E?t:[],u.readyState!=="loading"?e.apply(void 0,t):u.addEventListener("DOMContentLoaded",function(){e.apply(void 0,t)})}NodeList!==E&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),T.Coloris=function(){var e={set:P,wrap:X,close:I,setInstance:ne,removeInstance:oe,updatePosition:U};function t(r){_(function(){r&&(typeof r=="string"?Z:P)(r)})}for(var l in e)(function(r){t[r]=function(){for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];_(e[r],n)}})(l);return t}(),_(function(){x=E,(p=u.createElement("div")).setAttribute("id","clr-picker"),p.className="clr-picker",p.innerHTML='<input id="clr-color-value" name="clr-color-value" class="clr-color" type="text" value="" spellcheck="false" aria-label="'+a.a11y.input+'"><div id="clr-color-area" class="clr-gradient" role="application" aria-label="'+a.a11y.instruction+'"><div id="clr-color-marker" class="clr-marker" tabindex="0"></div></div><div class="clr-hue"><input id="clr-hue-slider" name="clr-hue-slider" type="range" min="0" max="360" step="1" aria-label="'+a.a11y.hueSlider+'"><div id="clr-hue-marker"></div></div><div class="clr-alpha"><input id="clr-alpha-slider" name="clr-alpha-slider" type="range" min="0" max="100" step="1" aria-label="'+a.a11y.alphaSlider+'"><div id="clr-alpha-marker"></div><span></span></div><div id="clr-format" class="clr-format"><fieldset class="clr-segmented"><legend>'+a.a11y.format+'</legend><input id="clr-f1" type="radio" name="clr-format" value="hex"><label for="clr-f1">Hex</label><input id="clr-f2" type="radio" name="clr-format" value="rgb"><label for="clr-f2">RGB</label><input id="clr-f3" type="radio" name="clr-format" value="hsl"><label for="clr-f3">HSL</label><span></span></fieldset></div><div id="clr-swatches" class="clr-swatches"></div><button type="button" id="clr-clear" class="clr-clear" aria-label="'+a.a11y.clear+'">'+a.clearLabel+'</button><div id="clr-color-preview" class="clr-preview"><button type="button" id="clr-close" class="clr-close" aria-label="'+a.a11y.close+'">'+a.closeLabel+'</button></div><span id="clr-open-label" hidden>'+a.a11y.open+'</span><span id="clr-swatch-label" hidden>'+a.a11y.swatch+"</span>",u.body.appendChild(p),w=v("clr-color-area"),b=v("clr-color-marker"),B=v("clr-clear"),M=v("clr-close"),q=v("clr-color-preview"),L=v("clr-color-value"),H=v("clr-hue-slider"),z=v("clr-hue-marker"),O=v("clr-alpha-slider"),A=v("clr-alpha-marker"),Z(a.el),X(a.el),f(p,"mousedown",function(e){p.classList.remove("clr-keyboard-nav"),e.stopPropagation()}),f(w,"mousedown",function(e){f(u,"mousemove",C)}),f(w,"touchstart",function(e){u.addEventListener("touchmove",C,{passive:!1})}),f(b,"mousedown",function(e){f(u,"mousemove",C)}),f(b,"touchstart",function(e){u.addEventListener("touchmove",C,{passive:!1})}),f(L,"change",function(e){var t=L.value;(d||a.inline)&&S(t===""?t:G(t))}),f(B,"click",function(e){S(""),I()}),f(M,"click",function(e){S(),I()}),f(v("clr-format"),"click",".clr-format input",function(e){F=e.target.value,K(),S()}),f(p,"click",".clr-swatches button",function(e){G(e.target.textContent),S(),a.swatchesOnly&&I()}),f(u,"mouseup",function(e){u.removeEventListener("mousemove",C)}),f(u,"touchend",function(e){u.removeEventListener("touchmove",C)}),f(u,"mousedown",function(e){J=!1,p.classList.remove("clr-keyboard-nav"),I()}),f(u,"keydown",function(e){var t,l=e.key,r=e.target,o=e.shiftKey;l==="Escape"?I(!0):["Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(l)&&(J=!0,p.classList.add("clr-keyboard-nav")),l==="Tab"&&r.matches(".clr-picker *")&&(l=(t=re()).shift(),t=t.pop(),o&&r===l?(t.focus(),e.preventDefault()):o||r!==t||(l.focus(),e.preventDefault()))}),f(u,"click",".clr-field button",function(e){W&&V(),e.target.nextElementSibling.dispatchEvent(new Event("click",{bubbles:!0}))}),f(b,"keydown",function(e){var t={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};Object.keys(t).includes(e.key)&&((function(l,r){le(+b.style.left.replace("px","")+l,+b.style.top.replace("px","")+r)}).apply(void 0,t[e.key]),e.preventDefault())}),f(w,"click",C),f(H,"input",ie),f(O,"input",se)})})(window,document,Math);
