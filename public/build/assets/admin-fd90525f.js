import{m as lt,T as vt}from"./toastify-f9ee0e47.js";import{C as yt,A as wt,d as bt,a as dt,f as _t,h as xt,e as St,l as Nt,p as Et,t as Ct,u as Tt,c as Dt,b as kt,i as Lt,g as Mt,m as At,j as Vt,q as Ot,r as qt,s as $t,w as Pt,k as It}from"./bundle-41cc055a.js";import"./index-a8aa5ca2.js";import{d as Ht,r as ct,c as Ne,M as pe,i as ut,v as ht}from"./helpers-403e1058.js";import"./helpers-33874dd9.js";import{a as Ae}from"./axios-4a70c6fc.js";import"./_commonjsHelpers-725317a4.js";window.Alpine=lt;window.Choices=yt;window.AirDatepicker=wt;window.localeEs=bt;window.Toastify=vt;window.Draggable=dt.Draggable;window.DgSortable=dt.Sortable;window.EditorJS=_t;window.EditorJsHeader=xt;window.EditorJsEmbed=St;window.EditorJsList=Nt;window.EditorJsParagraph=Et;window.EditorJsTable=Ct;window.EditorJsUnderline=Tt;window.EditorJsChecklist=Dt;window.EditorJsCode=kt;window.EditorJsInlineCode=Lt;window.EditorJsLink=Mt;window.EditorJsMarker=At;window.EditorJsPersonality=Vt;window.EditorJsQuote=Ot;window.EditorJsRaw=qt;window.EditorJsSimpleImage=$t;window.EditorJsWarning=Pt;window.EditorJsColor=It;lt.start();const Ft=n=>Object.prototype.toString.call(n)==="[object Object]",qe=(n,e)=>{const t=document.createElement(n);if(e&&typeof e=="object")for(const a in e)a==="html"?t.innerHTML=e[a]:t.setAttribute(a,e[a]);return t},fe=n=>["#text","#comment"].includes(n.nodeName)?n.data:n.childNodes?n.childNodes.map(e=>fe(e)).join(""):"",$e=function(n,e){let t=0,a=0;for(;t<n+1;)e[a].hidden||(t+=1),a+=1;return a-1};function Ee(n,e,t){var a;return n.nodeName==="#text"?a=t.document.createTextNode(n.data):n.nodeName==="#comment"?a=t.document.createComment(n.data):(e?a=t.document.createElementNS("http://www.w3.org/2000/svg",n.nodeName):n.nodeName.toLowerCase()==="svg"?(a=t.document.createElementNS("http://www.w3.org/2000/svg","svg"),e=!0):a=t.document.createElement(n.nodeName),n.attributes&&Object.entries(n.attributes).forEach(function(s){var o=s[0],i=s[1];return a.setAttribute(o,i)}),n.childNodes&&n.childNodes.forEach(function(s){return a.appendChild(Ee(s,e,t))}),t.valueDiffing&&(n.value&&(a instanceof HTMLButtonElement||a instanceof HTMLDataElement||a instanceof HTMLInputElement||a instanceof HTMLLIElement||a instanceof HTMLMeterElement||a instanceof HTMLOptionElement||a instanceof HTMLProgressElement||a instanceof HTMLParamElement)&&(a.value=n.value),n.checked&&a instanceof HTMLInputElement&&(a.checked=n.checked),n.selected&&a instanceof HTMLOptionElement&&(a.selected=n.selected))),a}var we=function(n,e){for(e=e.slice();e.length>0;){var t=e.splice(0,1)[0];n=n.childNodes[t]}return n};function Q(n,e,t){var a,s,o,i=e[t._const.action],l=e[t._const.route];[t._const.addElement,t._const.addTextElement].includes(i)||(a=we(n,l));var r={diff:e,node:a};if(t.preDiffApply(r))return!0;switch(i){case t._const.addAttribute:if(!(a&&a instanceof Element))return!1;a.setAttribute(e[t._const.name],e[t._const.value]);break;case t._const.modifyAttribute:if(!(a&&a instanceof Element))return!1;a.setAttribute(e[t._const.name],e[t._const.newValue]),a instanceof HTMLInputElement&&e[t._const.name]==="value"&&(a.value=e[t._const.newValue]);break;case t._const.removeAttribute:if(!(a&&a instanceof Element))return!1;a.removeAttribute(e[t._const.name]);break;case t._const.modifyTextElement:if(!(a&&a instanceof Text))return!1;t.textDiff(a,a.data,e[t._const.oldValue],e[t._const.newValue]),a.parentNode instanceof HTMLTextAreaElement&&(a.parentNode.value=e[t._const.newValue]);break;case t._const.modifyValue:if(!a||a.value===void 0)return!1;a.value=e[t._const.newValue];break;case t._const.modifyComment:if(!(a&&a instanceof Comment))return!1;t.textDiff(a,a.data,e[t._const.oldValue],e[t._const.newValue]);break;case t._const.modifyChecked:if(!a||a.checked===void 0)return!1;a.checked=e[t._const.newValue];break;case t._const.modifySelected:if(!a||a.selected===void 0)return!1;a.selected=e[t._const.newValue];break;case t._const.replaceElement:var d=e[t._const.newValue].nodeName.toLowerCase()==="svg"||a.parentNode.namespaceURI==="http://www.w3.org/2000/svg";a.parentNode.replaceChild(Ee(e[t._const.newValue],d,t),a);break;case t._const.relocateGroup:Array.apply(void 0,new Array(e[t._const.groupLength])).map(function(){return a.removeChild(a.childNodes[e[t._const.from]])}).forEach(function(m,u){u===0&&(o=a.childNodes[e[t._const.to]]),a.insertBefore(m,o||null)});break;case t._const.removeElement:a.parentNode.removeChild(a);break;case t._const.addElement:var p=(v=l.slice()).splice(v.length-1,1)[0];if(!((a=we(n,v))instanceof Element))return!1;a.insertBefore(Ee(e[t._const.element],a.namespaceURI==="http://www.w3.org/2000/svg",t),a.childNodes[p]||null);break;case t._const.removeTextElement:if(!a||a.nodeType!==3)return!1;var y=a.parentNode;y.removeChild(a),y instanceof HTMLTextAreaElement&&(y.value="");break;case t._const.addTextElement:var v;if(p=(v=l.slice()).splice(v.length-1,1)[0],s=t.document.createTextNode(e[t._const.value]),!(a=we(n,v)).childNodes)return!1;a.insertBefore(s,a.childNodes[p]||null),a.parentNode instanceof HTMLTextAreaElement&&(a.parentNode.value=e[t._const.value]);break;default:console.log("unknown action")}return t.postDiffApply({diff:r.diff,node:r.node,newNode:s}),!0}function be(n,e,t){var a=n[e];n[e]=n[t],n[t]=a}function Rt(n,e,t){(e=e.slice()).reverse(),e.forEach(function(a){(function(s,o,i){switch(o[i._const.action]){case i._const.addAttribute:o[i._const.action]=i._const.removeAttribute,Q(s,o,i);break;case i._const.modifyAttribute:be(o,i._const.oldValue,i._const.newValue),Q(s,o,i);break;case i._const.removeAttribute:o[i._const.action]=i._const.addAttribute,Q(s,o,i);break;case i._const.modifyTextElement:case i._const.modifyValue:case i._const.modifyComment:case i._const.modifyChecked:case i._const.modifySelected:case i._const.replaceElement:be(o,i._const.oldValue,i._const.newValue),Q(s,o,i);break;case i._const.relocateGroup:be(o,i._const.from,i._const.to),Q(s,o,i);break;case i._const.removeElement:o[i._const.action]=i._const.addElement,Q(s,o,i);break;case i._const.addElement:o[i._const.action]=i._const.removeElement,Q(s,o,i);break;case i._const.removeTextElement:o[i._const.action]=i._const.addTextElement,Q(s,o,i);break;case i._const.addTextElement:o[i._const.action]=i._const.removeTextElement,Q(s,o,i);break;default:console.log("unknown action")}})(n,a,t)})}var Ce=function(n){var e=[];return e.push(n.nodeName),n.nodeName!=="#text"&&n.nodeName!=="#comment"&&n.attributes&&(n.attributes.class&&e.push("".concat(n.nodeName,".").concat(n.attributes.class.replace(/ /g,"."))),n.attributes.id&&e.push("".concat(n.nodeName,"#").concat(n.attributes.id))),e},Pe=function(n){var e={},t={};return n.forEach(function(a){Ce(a).forEach(function(s){var o=s in e;o||s in t?o&&(delete e[s],t[s]=!0):e[s]=!0})}),e},mt=function(n,e){var t=Pe(n),a=Pe(e),s={};return Object.keys(t).forEach(function(o){a[o]&&(s[o]=!0)}),s},pt=function(n){return delete n.outerDone,delete n.innerDone,delete n.valueDone,!n.childNodes||n.childNodes.every(pt)},Y=function(n){if(Object.prototype.hasOwnProperty.call(n,"data"))return{nodeName:n.nodeName==="#text"?"#text":"#comment",data:n.data};var e={nodeName:n.nodeName};return Object.prototype.hasOwnProperty.call(n,"attributes")&&(e.attributes=n.attributes),Object.prototype.hasOwnProperty.call(n,"checked")&&(e.checked=n.checked),Object.prototype.hasOwnProperty.call(n,"value")&&(e.value=n.value),Object.prototype.hasOwnProperty.call(n,"selected")&&(e.selected=n.selected),Object.prototype.hasOwnProperty.call(n,"childNodes")&&(e.childNodes=n.childNodes.map(function(t){return Y(t)})),e},Te=function(n,e){if(!["nodeName","value","checked","selected","data"].every(function(s){return n[s]===e[s]}))return!1;if(Object.prototype.hasOwnProperty.call(n,"data"))return!0;if(!!n.attributes!=!!e.attributes||!!n.childNodes!=!!e.childNodes)return!1;if(n.attributes){var t=Object.keys(n.attributes),a=Object.keys(e.attributes);if(t.length!==a.length||!t.every(function(s){return n.attributes[s]===e.attributes[s]}))return!1}return!(n.childNodes&&(n.childNodes.length!==e.childNodes.length||!n.childNodes.every(function(s,o){return Te(s,e.childNodes[o])})))},Ve=function(n,e,t,a,s){if(s===void 0&&(s=!1),!n||!e||n.nodeName!==e.nodeName)return!1;if(["#text","#comment"].includes(n.nodeName))return!!s||n.data===e.data;if(n.nodeName in t)return!0;if(n.attributes&&e.attributes){if(n.attributes.id){if(n.attributes.id!==e.attributes.id)return!1;if("".concat(n.nodeName,"#").concat(n.attributes.id)in t)return!0}if(n.attributes.class&&n.attributes.class===e.attributes.class&&"".concat(n.nodeName,".").concat(n.attributes.class.replace(/ /g,"."))in t)return!0}if(a)return!0;var o=n.childNodes?n.childNodes.slice().reverse():[],i=e.childNodes?e.childNodes.slice().reverse():[];if(o.length!==i.length)return!1;if(s)return o.every(function(r,d){return r.nodeName===i[d].nodeName});var l=mt(o,i);return o.every(function(r,d){return Ve(r,i[d],l,!0,!0)})},he=function(n,e){return Array.apply(void 0,new Array(n)).map(function(){return e})},Bt=function(n,e){for(var t=n.childNodes?n.childNodes:[],a=e.childNodes?e.childNodes:[],s=he(t.length,!1),o=he(a.length,!1),i=[],l=function(){return arguments[1]},r=!1,d=function(){var p=function(y,v,m,u){var E=0,f=[],g=y.length,c=v.length,x=Array.apply(void 0,new Array(g+1)).map(function(){return[]}),T=mt(y,v),b=g===c;b&&y.some(function(O,C){var w=Ce(O),h=Ce(v[C]);return w.length!==h.length?(b=!1,!0):(w.some(function(L,_){if(L!==h[_])return b=!1,!0}),!b||void 0)});for(var S=0;S<g;S++)for(var D=y[S],N=0;N<c;N++){var V=v[N];m[S]||u[N]||!Ve(D,V,T,b)?x[S+1][N+1]=0:(x[S+1][N+1]=x[S][N]?x[S][N]+1:1,x[S+1][N+1]>=E&&(E=x[S+1][N+1],f=[S+1,N+1]))}return E!==0&&{oldValue:f[0]-E,newValue:f[1]-E,length:E}}(t,a,s,o);p?(i.push(p),Array.apply(void 0,new Array(p.length)).map(l).forEach(function(y){return function(v,m,u,E){v[u.oldValue+E]=!0,m[u.newValue+E]=!0}(s,o,p,y)})):r=!0};!r;)d();return n.subsets=i,n.subsetsAge=100,i},Yt=function(){function n(){this.list=[]}return n.prototype.add=function(e){var t;(t=this.list).push.apply(t,e)},n.prototype.forEach=function(e){this.list.forEach(function(t){return e(t)})},n}(),P=function(){function n(e){e===void 0&&(e={});var t=this;Object.entries(e).forEach(function(a){var s=a[0],o=a[1];return t[s]=o})}return n.prototype.toString=function(){return JSON.stringify(this)},n.prototype.setValue=function(e,t){return this[e]=t,this},n}();function _e(n,e){var t,a,s=n;for(e=e.slice();e.length>0;)a=e.splice(0,1)[0],t=s,s=s.childNodes?s.childNodes[a]:void 0;return{node:s,parentNode:t,nodeIndex:a}}function Wt(n,e,t){return e.forEach(function(a){(function(s,o,i){var l,r,d,p;if(![i._const.addElement,i._const.addTextElement].includes(o[i._const.action])){var y=_e(s,o[i._const.route]);r=y.node,d=y.parentNode,p=y.nodeIndex}var v,m,u=[],E={diff:o,node:r};if(i.preVirtualDiffApply(E))return!0;switch(o[i._const.action]){case i._const.addAttribute:r.attributes||(r.attributes={}),r.attributes[o[i._const.name]]=o[i._const.value],o[i._const.name]==="checked"?r.checked=!0:o[i._const.name]==="selected"?r.selected=!0:r.nodeName==="INPUT"&&o[i._const.name]==="value"&&(r.value=o[i._const.value]);break;case i._const.modifyAttribute:r.attributes[o[i._const.name]]=o[i._const.newValue];break;case i._const.removeAttribute:delete r.attributes[o[i._const.name]],Object.keys(r.attributes).length===0&&delete r.attributes,o[i._const.name]==="checked"?r.checked=!1:o[i._const.name]==="selected"?delete r.selected:r.nodeName==="INPUT"&&o[i._const.name]==="value"&&delete r.value;break;case i._const.modifyTextElement:r.data=o[i._const.newValue],d.nodeName==="TEXTAREA"&&(d.value=o[i._const.newValue]);break;case i._const.modifyValue:r.value=o[i._const.newValue];break;case i._const.modifyComment:r.data=o[i._const.newValue];break;case i._const.modifyChecked:r.checked=o[i._const.newValue];break;case i._const.modifySelected:r.selected=o[i._const.newValue];break;case i._const.replaceElement:v=o[i._const.newValue],d.childNodes[p]=v;break;case i._const.relocateGroup:r.childNodes.splice(o[i._const.from],o[i._const.groupLength]).reverse().forEach(function(c){return r.childNodes.splice(o[i._const.to],0,c)}),r.subsets&&r.subsets.forEach(function(c){if(o[i._const.from]<o[i._const.to]&&c.oldValue<=o[i._const.to]&&c.oldValue>o[i._const.from])c.oldValue-=o[i._const.groupLength],(x=c.oldValue+c.length-o[i._const.to])>0&&(u.push({oldValue:o[i._const.to]+o[i._const.groupLength],newValue:c.newValue+c.length-x,length:x}),c.length-=x);else if(o[i._const.from]>o[i._const.to]&&c.oldValue>o[i._const.to]&&c.oldValue<o[i._const.from]){var x;c.oldValue+=o[i._const.groupLength],(x=c.oldValue+c.length-o[i._const.to])>0&&(u.push({oldValue:o[i._const.to]+o[i._const.groupLength],newValue:c.newValue+c.length-x,length:x}),c.length-=x)}else c.oldValue===o[i._const.from]&&(c.oldValue=o[i._const.to])});break;case i._const.removeElement:d.childNodes.splice(p,1),d.subsets&&d.subsets.forEach(function(c){c.oldValue>p?c.oldValue-=1:c.oldValue===p?c.delete=!0:c.oldValue<p&&c.oldValue+c.length>p&&(c.oldValue+c.length-1===p?c.length--:(u.push({newValue:c.newValue+p-c.oldValue,oldValue:p,length:c.length-p+c.oldValue-1}),c.length=p-c.oldValue))}),r=d;break;case i._const.addElement:var f=(m=o[i._const.route].slice()).splice(m.length-1,1)[0];r=(l=_e(s,m))===null||l===void 0?void 0:l.node,v=o[i._const.element],r.childNodes||(r.childNodes=[]),f>=r.childNodes.length?r.childNodes.push(v):r.childNodes.splice(f,0,v),r.subsets&&r.subsets.forEach(function(c){if(c.oldValue>=f)c.oldValue+=1;else if(c.oldValue<f&&c.oldValue+c.length>f){var x=c.oldValue+c.length-f;u.push({newValue:c.newValue+c.length-x,oldValue:f+1,length:x}),c.length-=x}});break;case i._const.removeTextElement:d.childNodes.splice(p,1),d.nodeName==="TEXTAREA"&&delete d.value,d.subsets&&d.subsets.forEach(function(c){c.oldValue>p?c.oldValue-=1:c.oldValue===p?c.delete=!0:c.oldValue<p&&c.oldValue+c.length>p&&(c.oldValue+c.length-1===p?c.length--:(u.push({newValue:c.newValue+p-c.oldValue,oldValue:p,length:c.length-p+c.oldValue-1}),c.length=p-c.oldValue))}),r=d;break;case i._const.addTextElement:var g=(m=o[i._const.route].slice()).splice(m.length-1,1)[0];(v={}).nodeName="#text",v.data=o[i._const.value],(r=_e(s,m).node).childNodes||(r.childNodes=[]),g>=r.childNodes.length?r.childNodes.push(v):r.childNodes.splice(g,0,v),r.nodeName==="TEXTAREA"&&(r.value=o[i._const.newValue]),r.subsets&&r.subsets.forEach(function(c){if(c.oldValue>=g&&(c.oldValue+=1),c.oldValue<g&&c.oldValue+c.length>g){var x=c.oldValue+c.length-g;u.push({newValue:c.newValue+c.length-x,oldValue:g+1,length:x}),c.length-=x}});break;default:console.log("unknown action")}r.subsets&&(r.subsets=r.subsets.filter(function(c){return!c.delete&&c.oldValue!==c.newValue}),u.length&&(r.subsets=r.subsets.concat(u))),i.postVirtualDiffApply({node:E.node,diff:E.diff,newNode:v})})(n,a,t)}),!0}function ee(n,e){e===void 0&&(e={valueDiffing:!0});var t={nodeName:n.nodeName};return n instanceof Text||n instanceof Comment?t.data=n.data:(n.attributes&&n.attributes.length>0&&(t.attributes={},Array.prototype.slice.call(n.attributes).forEach(function(a){return t.attributes[a.name]=a.value})),n.childNodes&&n.childNodes.length>0&&(t.childNodes=[],Array.prototype.slice.call(n.childNodes).forEach(function(a){return t.childNodes.push(ee(a,e))})),e.valueDiffing&&(n instanceof HTMLTextAreaElement&&(t.value=n.value),n instanceof HTMLInputElement&&["radio","checkbox"].includes(n.type.toLowerCase())&&n.checked!==void 0?t.checked=n.checked:(n instanceof HTMLButtonElement||n instanceof HTMLDataElement||n instanceof HTMLInputElement||n instanceof HTMLLIElement||n instanceof HTMLMeterElement||n instanceof HTMLOptionElement||n instanceof HTMLProgressElement||n instanceof HTMLParamElement)&&(t.value=n.value),n instanceof HTMLOptionElement&&(t.selected=n.selected))),t}var Ut=/<\s*\/*[a-zA-Z:_][a-zA-Z0-9:_\-.]*\s*(?:"[^"]*"['"]*|'[^']*'['"]*|[^'"/>])*\/*\s*>|<!--(?:.|\n|\r)*?-->/g,Jt=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Ie(n){return n.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}var jt={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},He=function(n){var e={nodeName:"",attributes:{}},t=!1,a=n.match(/<\/?([^\s]+?)[/\s>]/);if(a&&(e.nodeName=a[1],(jt[a[1]]||n.charAt(n.length-2)==="/")&&(t=!0),e.nodeName.startsWith("!--"))){var s=n.indexOf("-->");return{type:"comment",node:{nodeName:"#comment",data:s!==-1?n.slice(4,s):""},voidElement:t}}for(var o=new RegExp(Jt),i=null,l=!1;!l;)if((i=o.exec(n))===null)l=!0;else if(i[0].trim())if(i[1]){var r=i[1].trim(),d=[r,""];r.indexOf("=")>-1&&(d=r.split("=")),e.attributes[d[0]]=d[1],o.lastIndex--}else i[2]&&(e.attributes[i[2]]=i[3].trim().substring(1,i[3].length-1));return{type:"tag",node:e,voidElement:t}},te=function(n,e){e===void 0&&(e={valueDiffing:!0});var t,a=[],s=-1,o=[];if(n.indexOf("<")!==0){var i=n.indexOf("<");a.push({nodeName:"#text",data:i===-1?n:n.substring(0,i)})}return n.replace(Ut,function(l,r){var d=l.charAt(1)!=="/",p=l.startsWith("<!--"),y=r+l.length,v=n.charAt(y);if(p){var m=He(l).node;if(s<0)return a.push(m),"";var u=o[s];return u&&m.nodeName&&(u.node.childNodes||(u.node.childNodes=[]),u.node.childNodes.push(m)),""}if(d){if(t=He(l),s++,!t.voidElement&&v&&v!=="<"){t.node.childNodes||(t.node.childNodes=[]);var E=Ie(n.slice(y,n.indexOf("<",y)));t.node.childNodes.push({nodeName:"#text",data:E}),e.valueDiffing&&t.node.nodeName==="TEXTAREA"&&(t.node.value=E)}s===0&&t.node.nodeName&&a.push(t.node);var f=o[s-1];f&&t.node.nodeName&&(f.node.childNodes||(f.node.childNodes=[]),f.node.childNodes.push(t.node)),o[s]=t}if((!d||t.voidElement)&&(s>-1&&(t.voidElement||t.node.nodeName.toUpperCase()===l.slice(2,-1).toUpperCase())&&--s>-1&&(t=o[s]),v!=="<"&&v)){var g=s===-1?a:o[s].node.childNodes||[],c=n.indexOf("<",y);E=Ie(n.slice(y,c===-1?void 0:c)),g.push({nodeName:"#text",data:E})}return""}),a[0]},zt=function(){function n(e,t,a){this.options=a,this.t1=typeof Element<"u"&&e instanceof Element?ee(e,this.options):typeof e=="string"?te(e,this.options):JSON.parse(JSON.stringify(e)),this.t2=typeof Element<"u"&&t instanceof Element?ee(t,this.options):typeof t=="string"?te(t,this.options):JSON.parse(JSON.stringify(t)),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig=typeof Element<"u"&&e instanceof Element?ee(e,this.options):typeof e=="string"?te(e,this.options):JSON.parse(JSON.stringify(e)),this.t2Orig=typeof Element<"u"&&t instanceof Element?ee(t,this.options):typeof t=="string"?te(t,this.options):JSON.parse(JSON.stringify(t))),this.tracker=new Yt}return n.prototype.init=function(){return this.findDiffs(this.t1,this.t2)},n.prototype.findDiffs=function(e,t){var a;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw new Error("surpassed diffcap:".concat(JSON.stringify(this.t1Orig)," -> ").concat(JSON.stringify(this.t2Orig)));(a=this.findNextDiff(e,t,[])).length===0&&(Te(e,t)||(this.foundAll?console.error("Could not find remaining diffs!"):(this.foundAll=!0,pt(e),a=this.findNextDiff(e,t,[])))),a.length>0&&(this.foundAll=!1,this.tracker.add(a),Wt(e,a,this.options))}while(a.length>0);return this.tracker.list},n.prototype.findNextDiff=function(e,t,a){var s,o;if(this.options.maxDepth&&a.length>this.options.maxDepth)return[];if(!e.outerDone){if(s=this.findOuterDiff(e,t,a),this.options.filterOuterDiff&&(o=this.options.filterOuterDiff(e,t,s))&&(s=o),s.length>0)return e.outerDone=!0,s;e.outerDone=!0}if(Object.prototype.hasOwnProperty.call(e,"data"))return[];if(!e.innerDone){if((s=this.findInnerDiff(e,t,a)).length>0)return s;e.innerDone=!0}if(this.options.valueDiffing&&!e.valueDone){if((s=this.findValueDiff(e,t,a)).length>0)return e.valueDone=!0,s;e.valueDone=!0}return[]},n.prototype.findOuterDiff=function(e,t,a){var s,o,i,l,r,d,p=[];if(e.nodeName!==t.nodeName){if(!a.length)throw new Error("Top level nodes have to be of the same kind.");return[new P().setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,Y(e)).setValue(this.options._const.newValue,Y(t)).setValue(this.options._const.route,a)]}if(a.length&&this.options.diffcap<Math.abs((e.childNodes||[]).length-(t.childNodes||[]).length))return[new P().setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,Y(e)).setValue(this.options._const.newValue,Y(t)).setValue(this.options._const.route,a)];if(Object.prototype.hasOwnProperty.call(e,"data")&&e.data!==t.data)return e.nodeName==="#text"?[new P().setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,a).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)]:[new P().setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,a).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)];for(o=e.attributes?Object.keys(e.attributes).sort():[],i=t.attributes?Object.keys(t.attributes).sort():[],l=o.length,d=0;d<l;d++)s=o[d],(r=i.indexOf(s))===-1?p.push(new P().setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,a).setValue(this.options._const.name,s).setValue(this.options._const.value,e.attributes[s])):(i.splice(r,1),e.attributes[s]!==t.attributes[s]&&p.push(new P().setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,a).setValue(this.options._const.name,s).setValue(this.options._const.oldValue,e.attributes[s]).setValue(this.options._const.newValue,t.attributes[s])));for(l=i.length,d=0;d<l;d++)s=i[d],p.push(new P().setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,a).setValue(this.options._const.name,s).setValue(this.options._const.value,t.attributes[s]));return p},n.prototype.findInnerDiff=function(e,t,a){var s=e.childNodes?e.childNodes.slice():[],o=t.childNodes?t.childNodes.slice():[],i=Math.max(s.length,o.length),l=Math.abs(s.length-o.length),r=[],d=0;if(!this.options.maxChildCount||i<this.options.maxChildCount){var p=!!(e.subsets&&e.subsetsAge--),y=p?e.subsets:e.childNodes&&t.childNodes?Bt(e,t):[];if(y.length>0&&(r=this.attemptGroupRelocation(e,t,y,a,p)).length>0)return r}for(var v=0;v<i;v+=1){var m=s[v],u=o[v];if(l&&(m&&!u?m.nodeName==="#text"?(r.push(new P().setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,a.concat(d)).setValue(this.options._const.value,m.data)),d-=1):(r.push(new P().setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,a.concat(d)).setValue(this.options._const.element,Y(m))),d-=1):u&&!m&&(u.nodeName==="#text"?r.push(new P().setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,a.concat(d)).setValue(this.options._const.value,u.data)):r.push(new P().setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,a.concat(d)).setValue(this.options._const.element,Y(u))))),m&&u){if(!this.options.maxChildCount||i<this.options.maxChildCount)r=r.concat(this.findNextDiff(m,u,a.concat(d)));else if(!Te(m,u))if(s.length>o.length)m.nodeName==="#text"?r.push(new P().setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,a.concat(d)).setValue(this.options._const.value,m.data)):r.push(new P().setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,Y(m)).setValue(this.options._const.route,a.concat(d))),s.splice(v,1),v-=1,d-=1,l-=1;else if(s.length<o.length){var E=Y(u);r=r.concat([new P().setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,E).setValue(this.options._const.route,a.concat(d))]),s.splice(v,0,E),l-=1}else r=r.concat([new P().setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,Y(m)).setValue(this.options._const.newValue,Y(u)).setValue(this.options._const.route,a.concat(d))])}d+=1}return e.innerDone=!0,r},n.prototype.attemptGroupRelocation=function(e,t,a,s,o){for(var i,l,r,d,p,y,v=function(T,b,S){var D=T.childNodes?he(T.childNodes.length,!0):[],N=b.childNodes?he(b.childNodes.length,!0):[],V=0;return S.forEach(function(O){for(var C=O.oldValue+O.length,w=O.newValue+O.length,h=O.oldValue;h<C;h+=1)D[h]=V;for(h=O.newValue;h<w;h+=1)N[h]=V;V+=1}),{gaps1:D,gaps2:N}}(e,t,a),m=v.gaps1,u=v.gaps2,E=Math.min(m.length,u.length),f=[],g=0,c=0;g<E;c+=1,g+=1)if(!o||m[g]!==!0&&u[g]!==!0){if(m[g]===!0)if((d=e.childNodes[c]).nodeName==="#text")if(t.childNodes[g].nodeName==="#text"){if(d.data!==t.childNodes[g].data){for(y=c;e.childNodes.length>y+1&&e.childNodes[y+1].nodeName==="#text";)if(y+=1,t.childNodes[g].data===e.childNodes[y].data){p=!0;break}if(!p)return f.push(new P().setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,s.concat(g)).setValue(this.options._const.oldValue,d.data).setValue(this.options._const.newValue,t.childNodes[g].data)),f}}else f.push(new P().setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,s.concat(g)).setValue(this.options._const.value,d.data)),m.splice(g,1),E=Math.min(m.length,u.length),g-=1;else f.push(new P().setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,s.concat(g)).setValue(this.options._const.element,Y(d))),m.splice(g,1),E=Math.min(m.length,u.length),g-=1;else if(u[g]===!0)(d=t.childNodes[g]).nodeName==="#text"?(f.push(new P().setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,s.concat(g)).setValue(this.options._const.value,d.data)),m.splice(g,0,!0),E=Math.min(m.length,u.length),c-=1):(f.push(new P().setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,s.concat(g)).setValue(this.options._const.element,Y(d))),m.splice(g,0,!0),E=Math.min(m.length,u.length),c-=1);else if(m[g]!==u[g]){if(f.length>0)return f;if(r=a[m[g]],(l=Math.min(r.newValue,e.childNodes.length-r.length))!==r.oldValue){i=!1;for(var x=0;x<r.length;x+=1)Ve(e.childNodes[l+x],e.childNodes[r.oldValue+x],{},!1,!0)||(i=!0);if(i)return[new P().setValue(this.options._const.action,this.options._const.relocateGroup).setValue(this.options._const.groupLength,r.length).setValue(this.options._const.from,r.oldValue).setValue(this.options._const.to,l).setValue(this.options._const.route,s)]}}}return f},n.prototype.findValueDiff=function(e,t,a){var s=[];return e.selected!==t.selected&&s.push(new P().setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,e.selected).setValue(this.options._const.newValue,t.selected).setValue(this.options._const.route,a)),(e.value||t.value)&&e.value!==t.value&&e.nodeName!=="OPTION"&&s.push(new P().setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,e.value||"").setValue(this.options._const.newValue,t.value||"").setValue(this.options._const.route,a)),e.checked!==t.checked&&s.push(new P().setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,e.checked).setValue(this.options._const.newValue,t.checked).setValue(this.options._const.route,a)),s},n}(),Qt={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff:function(n,e,t,a){n.data=a},preVirtualDiffApply:function(){},postVirtualDiffApply:function(){},preDiffApply:function(){},postDiffApply:function(){},filterOuterDiff:null,compress:!1,_const:!1,document:!(typeof window>"u"||!window.document)&&window.document,components:[]},Xt=function(){function n(e){if(e===void 0&&(e={}),Object.entries(Qt).forEach(function(s){var o=s[0],i=s[1];Object.prototype.hasOwnProperty.call(e,o)||(e[o]=i)}),!e._const){var t=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","groupLength","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"],a={};e.compress?t.forEach(function(s,o){return a[s]=o}):t.forEach(function(s){return a[s]=s}),e._const=a}this.options=e}return n.prototype.apply=function(e,t){return function(a,s,o){return s.every(function(i){return Q(a,i,o)})}(e,t,this.options)},n.prototype.undo=function(e,t){return Rt(e,t,this.options)},n.prototype.diff=function(e,t){return new zt(e,t,this.options).init()},n}();const De=(n,e,t,{classes:a,format:s,hiddenHeader:o,sortable:i,scrollY:l,type:r},{noColumnWidths:d,unhideHeader:p})=>({nodeName:"TR",childNodes:n.map((y,v)=>{const m=e[v]||{type:r,format:s,sortable:!0,searchable:!0};if(m.hidden)return;const u={};if(m.sortable&&i&&(!l.length||p)&&(m.filter?u["data-filterable"]="true":u["data-sortable"]="true"),m.headerClass&&(u.class=m.headerClass),t.sort&&t.sort.column===v){const g=t.sort.dir==="asc"?a.ascending:a.descending;u.class=u.class?`${u.class} ${g}`:g,u["aria-sort"]=t.sort.dir==="asc"?"ascending":"descending"}else t.filters[v]&&(u.class=u.class?`${u.class} ${a.filterActive}`:a.filterActive);let E="";t.widths[v]&&!d&&(E+=`width: ${t.widths[v]}%;`),l.length&&!p&&(E+="padding-bottom: 0;padding-top: 0;border: 0;"),E.length&&(u.style=E);const f=y.type==="html"?y.data:[{nodeName:"#text",data:y.text??String(y.data)}];return{nodeName:"TH",attributes:u,childNodes:!o&&!l.length||p?m.sortable&&i?[{nodeName:"a",attributes:{href:"#",class:m.filter?a.filter:a.sorter},childNodes:f}]:f:[{nodeName:"#text",data:""}]}}).filter(y=>y)}),Fe=(n,e,t,a,s,o,{classes:i,hiddenHeader:l,header:r,footer:d,format:p,sortable:y,scrollY:v,type:m,rowRender:u,tabIndex:E},{noColumnWidths:f,unhideHeader:g,renderHeader:c})=>{const x={nodeName:"TABLE",attributes:{...n},childNodes:[{nodeName:"TBODY",childNodes:t.map(({row:T,index:b})=>{const S={nodeName:"TR",attributes:{"data-index":String(b)},childNodes:T.map((D,N)=>{const V=a[N]||{type:m,format:p,sortable:!0,searchable:!0};if(V.hidden)return;const O=V.type==="html"?{nodeName:"TD",childNodes:D.data}:{nodeName:"TD",childNodes:[{nodeName:"#text",data:D.text??String(D.data)}]};if(r||d||!s.widths[N]||f||(O.attributes={style:`width: ${s.widths[N]}%;`}),V.cellClass&&(O.attributes||(O.attributes={}),O.attributes.class=V.cellClass),V.render){const C=V.render(D.data,O,b,N);if(C){if(typeof C!="string")return C;{const w=te(`<td>${C}</td>`);w.childNodes.length===1&&["#text","#comment"].includes(w.childNodes[0].nodeName)?O.childNodes[0].data=C:O.childNodes=w.childNodes}}}return O}).filter(D=>D)};if(b===o&&(S.attributes.class=i.cursor),u){const D=u(T,S,b);if(D){if(typeof D!="string")return D;{const N=te(`<tr>${D}</tr>`);!N.childNodes||N.childNodes.length===1&&["#text","#comment"].includes(N.childNodes[0].nodeName)?S.childNodes[0].data=D:S.childNodes=N.childNodes}}}return S})}]};if(x.attributes.class=x.attributes.class?`${x.attributes.class} ${i.table}`:i.table,r||d||c){const T=De(e,a,s,{classes:i,hiddenHeader:l,sortable:y,scrollY:v},{noColumnWidths:f,unhideHeader:g});if(r||c){const b={nodeName:"THEAD",childNodes:[T]};!v.length&&!l||g||(b.attributes={style:"height: 0px;"}),x.childNodes.unshift(b)}if(d){const b={nodeName:"TFOOT",childNodes:[r?structuredClone(T):T]};!v.length&&!l||g||(b.attributes={style:"height: 0px;"}),x.childNodes.push(b)}}return E!==!1&&(x.attributes.tabindex=String(E)),x};var ke={};({get exports(){return ke},set exports(n){ke=n}}).exports=function(){var n=1e3,e=6e4,t=36e5,a="millisecond",s="second",o="minute",i="hour",l="day",r="week",d="month",p="quarter",y="year",v="date",m="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(C){var w=["th","st","nd","rd"],h=C%100;return"["+C+(w[(h-20)%10]||w[h]||w[0])+"]"}},g=function(C,w,h){var L=String(C);return!L||L.length>=w?C:""+Array(w+1-L.length).join(h)+C},c={s:g,z:function(C){var w=-C.utcOffset(),h=Math.abs(w),L=Math.floor(h/60),_=h%60;return(w<=0?"+":"-")+g(L,2,"0")+":"+g(_,2,"0")},m:function C(w,h){if(w.date()<h.date())return-C(h,w);var L=12*(h.year()-w.year())+(h.month()-w.month()),_=w.clone().add(L,d),M=h-_<0,k=w.clone().add(L+(M?-1:1),d);return+(-(L+(h-_)/(M?_-k:k-_))||0)},a:function(C){return C<0?Math.ceil(C)||0:Math.floor(C)},p:function(C){return{M:d,y,w:r,d:l,D:v,h:i,m:o,s,ms:a,Q:p}[C]||String(C||"").toLowerCase().replace(/s$/,"")},u:function(C){return C===void 0}},x="en",T={};T[x]=f;var b=function(C){return C instanceof V},S=function C(w,h,L){var _;if(!w)return x;if(typeof w=="string"){var M=w.toLowerCase();T[M]&&(_=M),h&&(T[M]=h,_=M);var k=w.split("-");if(!_&&k.length>1)return C(k[0])}else{var A=w.name;T[A]=w,_=A}return!L&&_&&(x=_),_||!L&&x},D=function(C,w){if(b(C))return C.clone();var h=typeof w=="object"?w:{};return h.date=C,h.args=arguments,new V(h)},N=c;N.l=S,N.i=b,N.w=function(C,w){return D(C,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var V=function(){function C(h){this.$L=S(h.locale,null,!0),this.parse(h)}var w=C.prototype;return w.parse=function(h){this.$d=function(L){var _=L.date,M=L.utc;if(_===null)return new Date(NaN);if(N.u(_))return new Date;if(_ instanceof Date)return new Date(_);if(typeof _=="string"&&!/Z$/i.test(_)){var k=_.match(u);if(k){var A=k[2]-1||0,q=(k[7]||"0").substring(0,3);return M?new Date(Date.UTC(k[1],A,k[3]||1,k[4]||0,k[5]||0,k[6]||0,q)):new Date(k[1],A,k[3]||1,k[4]||0,k[5]||0,k[6]||0,q)}}return new Date(_)}(h),this.$x=h.x||{},this.init()},w.init=function(){var h=this.$d;this.$y=h.getFullYear(),this.$M=h.getMonth(),this.$D=h.getDate(),this.$W=h.getDay(),this.$H=h.getHours(),this.$m=h.getMinutes(),this.$s=h.getSeconds(),this.$ms=h.getMilliseconds()},w.$utils=function(){return N},w.isValid=function(){return this.$d.toString()!==m},w.isSame=function(h,L){var _=D(h);return this.startOf(L)<=_&&_<=this.endOf(L)},w.isAfter=function(h,L){return D(h)<this.startOf(L)},w.isBefore=function(h,L){return this.endOf(L)<D(h)},w.$g=function(h,L,_){return N.u(h)?this[L]:this.set(_,h)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(h,L){var _=this,M=!!N.u(L)||L,k=N.p(h),A=function(z,H){var W=N.w(_.$u?Date.UTC(_.$y,H,z):new Date(_.$y,H,z),_);return M?W:W.endOf(l)},q=function(z,H){return N.w(_.toDate()[z].apply(_.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(H)),_)},$=this.$W,I=this.$M,j=this.$D,U="set"+(this.$u?"UTC":"");switch(k){case y:return M?A(1,0):A(31,11);case d:return M?A(1,I):A(0,I+1);case r:var ne=this.$locale().weekStart||0,Z=($<ne?$+7:$)-ne;return A(M?j-Z:j+(6-Z),I);case l:case v:return q(U+"Hours",0);case i:return q(U+"Minutes",1);case o:return q(U+"Seconds",2);case s:return q(U+"Milliseconds",3);default:return this.clone()}},w.endOf=function(h){return this.startOf(h,!1)},w.$set=function(h,L){var _,M=N.p(h),k="set"+(this.$u?"UTC":""),A=(_={},_[l]=k+"Date",_[v]=k+"Date",_[d]=k+"Month",_[y]=k+"FullYear",_[i]=k+"Hours",_[o]=k+"Minutes",_[s]=k+"Seconds",_[a]=k+"Milliseconds",_)[M],q=M===l?this.$D+(L-this.$W):L;if(M===d||M===y){var $=this.clone().set(v,1);$.$d[A](q),$.init(),this.$d=$.set(v,Math.min(this.$D,$.daysInMonth())).$d}else A&&this.$d[A](q);return this.init(),this},w.set=function(h,L){return this.clone().$set(h,L)},w.get=function(h){return this[N.p(h)]()},w.add=function(h,L){var _,M=this;h=Number(h);var k=N.p(L),A=function(I){var j=D(M);return N.w(j.date(j.date()+Math.round(I*h)),M)};if(k===d)return this.set(d,this.$M+h);if(k===y)return this.set(y,this.$y+h);if(k===l)return A(1);if(k===r)return A(7);var q=(_={},_[o]=e,_[i]=t,_[s]=n,_)[k]||1,$=this.$d.getTime()+h*q;return N.w($,this)},w.subtract=function(h,L){return this.add(-1*h,L)},w.format=function(h){var L=this,_=this.$locale();if(!this.isValid())return _.invalidDate||m;var M=h||"YYYY-MM-DDTHH:mm:ssZ",k=N.z(this),A=this.$H,q=this.$m,$=this.$M,I=_.weekdays,j=_.months,U=function(H,W,K,G){return H&&(H[W]||H(L,M))||K[W].slice(0,G)},ne=function(H){return N.s(A%12||12,H,"0")},Z=_.meridiem||function(H,W,K){var G=H<12?"AM":"PM";return K?G.toLowerCase():G},z={YY:String(this.$y).slice(-2),YYYY:this.$y,M:$+1,MM:N.s($+1,2,"0"),MMM:U(_.monthsShort,$,j,3),MMMM:U(j,$),D:this.$D,DD:N.s(this.$D,2,"0"),d:String(this.$W),dd:U(_.weekdaysMin,this.$W,I,2),ddd:U(_.weekdaysShort,this.$W,I,3),dddd:I[this.$W],H:String(A),HH:N.s(A,2,"0"),h:ne(1),hh:ne(2),a:Z(A,q,!0),A:Z(A,q,!1),m:String(q),mm:N.s(q,2,"0"),s:String(this.$s),ss:N.s(this.$s,2,"0"),SSS:N.s(this.$ms,3,"0"),Z:k};return M.replace(E,function(H,W){return W||z[H]||k.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(h,L,_){var M,k=N.p(L),A=D(h),q=(A.utcOffset()-this.utcOffset())*e,$=this-A,I=N.m(this,A);return I=(M={},M[y]=I/12,M[d]=I,M[p]=I/3,M[r]=($-q)/6048e5,M[l]=($-q)/864e5,M[i]=$/t,M[o]=$/e,M[s]=$/n,M)[k]||$,_?I:N.a(I)},w.daysInMonth=function(){return this.endOf(d).$D},w.$locale=function(){return T[this.$L]},w.locale=function(h,L){if(!h)return this.$L;var _=this.clone(),M=S(h,L,!0);return M&&(_.$L=M),_},w.clone=function(){return N.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},C}(),O=V.prototype;return D.prototype=O,[["$ms",a],["$s",s],["$m",o],["$H",i],["$W",l],["$M",d],["$y",y],["$D",v]].forEach(function(C){O[C[1]]=function(w){return this.$g(w,C[0],C[1])}}),D.extend=function(C,w){return C.$i||(C(w,V,D),C.$i=!0),D},D.locale=S,D.isDayjs=b,D.unix=function(C){return D(1e3*C)},D.en=T[x],D.Ls=T,D.p={},D}();var le=ke,Le={};({get exports(){return Le},set exports(n){Le=n}}).exports=function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,t=/\d\d/,a=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,o={},i=function(m){return(m=+m)+(m>68?1900:2e3)},l=function(m){return function(u){this[m]=+u}},r=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(u){if(!u||u==="Z")return 0;var E=u.match(/([+-]|\d\d)/g),f=60*E[1]+(+E[2]||0);return f===0?0:E[0]==="+"?-f:f}(m)}],d=function(m){var u=o[m];return u&&(u.indexOf?u:u.s.concat(u.f))},p=function(m,u){var E,f=o.meridiem;if(f){for(var g=1;g<=24;g+=1)if(m.indexOf(f(g,0,u))>-1){E=g>12;break}}else E=m===(u?"pm":"PM");return E},y={A:[s,function(m){this.afternoon=p(m,!1)}],a:[s,function(m){this.afternoon=p(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[t,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[a,l("seconds")],ss:[a,l("seconds")],m:[a,l("minutes")],mm:[a,l("minutes")],H:[a,l("hours")],h:[a,l("hours")],HH:[a,l("hours")],hh:[a,l("hours")],D:[a,l("day")],DD:[t,l("day")],Do:[s,function(m){var u=o.ordinal,E=m.match(/\d+/);if(this.day=E[0],u)for(var f=1;f<=31;f+=1)u(f).replace(/\[|\]/g,"")===m&&(this.day=f)}],M:[a,l("month")],MM:[t,l("month")],MMM:[s,function(m){var u=d("months"),E=(d("monthsShort")||u.map(function(f){return f.slice(0,3)})).indexOf(m)+1;if(E<1)throw new Error;this.month=E%12||E}],MMMM:[s,function(m){var u=d("months").indexOf(m)+1;if(u<1)throw new Error;this.month=u%12||u}],Y:[/[+-]?\d+/,l("year")],YY:[t,function(m){this.year=i(m)}],YYYY:[/\d{4}/,l("year")],Z:r,ZZ:r};function v(m){var u,E;u=m,E=o&&o.formats;for(var f=(m=u.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(D,N,V){var O=V&&V.toUpperCase();return N||E[V]||n[V]||E[O].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(C,w,h){return w||h.slice(1)})})).match(e),g=f.length,c=0;c<g;c+=1){var x=f[c],T=y[x],b=T&&T[0],S=T&&T[1];f[c]=S?{regex:b,parser:S}:x.replace(/^\[|\]$/g,"")}return function(D){for(var N={},V=0,O=0;V<g;V+=1){var C=f[V];if(typeof C=="string")O+=C.length;else{var w=C.regex,h=C.parser,L=D.slice(O),_=w.exec(L)[0];h.call(N,_),D=D.replace(_,"")}}return function(M){var k=M.afternoon;if(k!==void 0){var A=M.hours;k?A<12&&(M.hours+=12):A===12&&(M.hours=0),delete M.afternoon}}(N),N}}return function(m,u,E){E.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(i=m.parseTwoDigitYear);var f=u.prototype,g=f.parse;f.parse=function(c){var x=c.date,T=c.utc,b=c.args;this.$u=T;var S=b[1];if(typeof S=="string"){var D=b[2]===!0,N=b[3]===!0,V=D||N,O=b[2];N&&(O=b[2]),o=this.$locale(),!D&&O&&(o=E.Ls[O]),this.$d=function(L,_,M){try{if(["x","X"].indexOf(_)>-1)return new Date((_==="X"?1e3:1)*L);var k=v(_)(L),A=k.year,q=k.month,$=k.day,I=k.hours,j=k.minutes,U=k.seconds,ne=k.milliseconds,Z=k.zone,z=new Date,H=$||(A||q?1:z.getDate()),W=A||z.getFullYear(),K=0;A&&!q||(K=q>0?q-1:z.getMonth());var G=I||0,ge=j||0,ve=U||0,ye=ne||0;return Z?new Date(Date.UTC(W,K,H,G,ge,ve,ye+60*Z.offset*1e3)):M?new Date(Date.UTC(W,K,H,G,ge,ve,ye)):new Date(W,K,H,G,ge,ve,ye)}catch{return new Date("")}}(x,S,T),this.init(),O&&O!==!0&&(this.$L=this.locale(O).$L),V&&x!=this.format(S)&&(this.$d=new Date("")),o={}}else if(S instanceof Array)for(var C=S.length,w=1;w<=C;w+=1){b[1]=S[w-1];var h=E.apply(this,b);if(h.isValid()){this.$d=h.$d,this.$L=h.$L,this.init();break}w===C&&(this.$d=new Date(""))}else g.call(this,c)}}}();var Zt=Le;le.extend(Zt);const ft=(n,e)=>{let t;if(e)switch(e){case"ISO_8601":t=n;break;case"RFC_2822":t=le(n.slice(5),"DD MMM YYYY HH:mm:ss ZZ").unix();break;case"MYSQL":t=le(n,"YYYY-MM-DD hh:mm:ss").unix();break;case"UNIX":t=le(n).unix();break;default:t=le(n,e,!0).valueOf()}return t},ae=(n,e)=>{if((n==null?void 0:n.constructor)===Object&&Object.prototype.hasOwnProperty.call(n,"data")&&!Object.keys(n).find(a=>!["text","order","data"].includes(a)))return n;const t={data:n};switch(e.type){case"string":typeof n!="string"&&(t.text=String(t.data),t.order=t.text);break;case"date":e.format&&(t.order=ft(String(t.data),e.format));break;case"number":t.text=String(t.data),t.data=parseInt(t.data,10);break;case"html":{const a=Array.isArray(t.data)?{nodeName:"TD",childNodes:t.data}:te(`<td>${String(t.data)}</td>`);t.data=a.childNodes||[];const s=fe(a);t.text=s,t.order=s;break}case"boolean":typeof t.data=="string"&&(t.data=t.data.toLowerCase().trim()),t.data=!["false",!1,null,void 0,0].includes(t.data),t.order=t.data?1:0,t.text=String(t.data);break;case"other":t.text="",t.order=0;break;default:t.text=JSON.stringify(t.data)}return t},de=n=>{if(n instanceof Object&&n.constructor===Object&&n.hasOwnProperty("data")&&(typeof n.text=="string"||typeof n.data=="string"))return n;const e={data:n};if(typeof n=="string"){if(n.length){const t=te(`<th>${n}</th>`);if(t.childNodes&&(t.childNodes.length!==1||t.childNodes[0].nodeName!=="#text")){e.data=t.childNodes,e.type="html";const a=fe(t);e.text=a}}}else[null,void 0].includes(n)?e.text="":e.text=JSON.stringify(n);return e},Re=(n,e,t,a,s)=>{var i,l;const o={data:[],headings:[]};n.headings?o.headings=n.headings.map(r=>de(r)):e!=null&&e.tHead?o.headings=Array.from(e.tHead.querySelectorAll("th")).map((r,d)=>{var v,m,u,E,f;const p=(g=>{const c=ee(g,{valueDiffing:!1});let x;return x=!c.childNodes||c.childNodes.length===1&&c.childNodes[0].nodeName==="#text"?{data:g.innerText,type:"string"}:{data:c.childNodes,type:"html",text:fe(c)},x})(r);t[d]||(t[d]={type:a,format:s,searchable:!0,sortable:!0,isSplitQueryWord:!0});const y=t[d];return((v=r.dataset.sortable)==null?void 0:v.trim().toLowerCase())!=="false"&&((m=r.dataset.sort)==null?void 0:m.trim().toLowerCase())!=="false"||(y.sortable=!1),((u=r.dataset.searchable)==null?void 0:u.trim().toLowerCase())==="false"&&(y.searchable=!1),((E=r.dataset.hidden)==null?void 0:E.trim().toLowerCase())!=="true"&&((f=r.getAttribute("hidden"))==null?void 0:f.trim().toLowerCase())!=="true"||(y.hidden=!0),["number","string","html","date","boolean","other"].includes(r.dataset.type)&&(y.type=r.dataset.type,y.type==="date"&&r.dataset.format&&(y.format=r.dataset.format)),p}):(i=n.data)!=null&&i.length?o.headings=n.data[0].map(r=>de("")):e!=null&&e.tBodies.length&&(o.headings=Array.from(e.tBodies[0].rows[0].cells).map(r=>de("")));for(let r=0;r<o.headings.length;r++)t[r]||(t[r]={type:a,format:s,sortable:!0,searchable:!0});if(n.data?o.data=n.data.map(r=>r.map((d,p)=>ae(d,t[p]))):(l=e==null?void 0:e.tBodies)!=null&&l.length&&(o.data=Array.from(e.tBodies[0].rows).map(r=>Array.from(r.cells).map((d,p)=>{const y=d.dataset.content?ae(d.dataset.content,t[p]):((v,m)=>{let u;switch(m.type){case"string":u={data:v.innerText};break;case"date":{const E=v.innerText;u={data:E,order:ft(E,m.format)};break}case"number":u={data:parseInt(v.innerText,10),text:v.innerText};break;case"boolean":{const E=!["false","0","null","undefined"].includes(v.innerText.toLowerCase().trim());u={data:E,order:E?1:0,text:E?"1":"0"};break}default:u={data:ee(v,{valueDiffing:!1}).childNodes||[],text:v.innerText,order:v.innerText}}return u})(d,t[p]);return d.dataset.order&&(y.order=isNaN(parseFloat(d.dataset.order))?d.dataset.order:parseFloat(d.dataset.order)),y}))),o.data.length&&o.data[0].length!==o.headings.length)throw new Error("Data heading length mismatch.");return o};class Kt{constructor(e){this.dt=e,this.cursor=!1}setCursor(e=!1){if(e===this.cursor)return;const t=this.cursor;if(this.cursor=e,this.dt._renderTable(),e!==!1&&this.dt.options.scrollY){const a=this.dt.dom.querySelector(`tr.${this.dt.options.classes.cursor}`);a&&a.scrollIntoView({block:"nearest"})}this.dt.emit("datatable.cursormove",this.cursor,t)}add(e){const t=e.map((a,s)=>{const o=this.dt.columns.settings[s];return ae(a,o)});this.dt.data.data.push(t),this.dt.data.data.length&&(this.dt.hasRows=!0),this.dt.update(!0)}remove(e){if(!Array.isArray(e))return this.remove([e]);this.dt.data.data=this.dt.data.data.filter((t,a)=>!e.includes(a)),this.dt.data.data.length||(this.dt.hasRows=!1),this.dt.update(!0)}findRowIndex(e,t){return this.dt.data.data.findIndex(a=>(a[e].text??String(a[e].data)).toLowerCase().includes(String(t).toLowerCase()))}findRow(e,t){const a=this.findRowIndex(e,t);if(a<0)return{index:-1,row:null,cols:[]};const s=this.dt.data.data[a],o=s.map(i=>i.data);return{index:a,row:s,cols:o}}updateRow(e,t){const a=t.map((s,o)=>{const i=this.dt.columns.settings[o];return ae(s,i)});this.dt.data.data.splice(e,1,a),this.dt.update(!0)}}class Gt{constructor(e){this.dt=e,this.init()}init(){[this.settings,this._state]=((e=[],t,a)=>{let s=[],o=!1;const i=[];return e.forEach(l=>{(Array.isArray(l.select)?l.select:[l.select]).forEach(r=>{s[r]||(s[r]={type:l.type||t,sortable:!0,searchable:!0,isSplitQueryWord:!0,searchQuerySeparator:" "});const d=s[r];l.render&&(d.render=l.render),l.format?d.format=l.format:l.type==="date"&&(d.format=a),l.cellClass&&(d.cellClass=l.cellClass),l.headerClass&&(d.headerClass=l.headerClass),l.locale&&(d.locale=l.locale),l.sortable===!1?d.sortable=!1:(l.numeric&&(d.numeric=l.numeric),l.caseFirst&&(d.caseFirst=l.caseFirst)),l.searchable===!1?d.searchable=!1:l.sensitivity&&(d.sensitivity=l.sensitivity),(d.searchable||d.sortable)&&l.ignorePunctuation&&(d.ignorePunctuation=l.ignorePunctuation),l.hidden&&(d.hidden=!0),l.filter&&(d.filter=l.filter),l.sortSequence&&(d.sortSequence=l.sortSequence),l.sort&&(l.filter?i[r]=l.sort:o={column:r,dir:l.sort}),l.isSplitQueryWord!==void 0&&(d.isSplitQueryWord=l.isSplitQueryWord),l.searchQuerySeparator!==void 0&&(d.searchQuerySeparator=l.searchQuerySeparator)})}),s=s.map(l=>l||{type:t,format:t==="date"?a:void 0,sortable:!0,searchable:!0,isSplitQueryWord:!0,searchQuerySeparator:" "}),[s,{filters:i,sort:o,widths:[]}]})(this.dt.options.columns,this.dt.options.type,this.dt.options.format)}swap(e){if(e.length===2){const t=this.dt.data.headings.map((i,l)=>l),a=e[0],s=e[1],o=t[s];return t[s]=t[a],t[a]=o,this.order(t)}}order(e){this.dt.data.headings=e.map(t=>this.dt.data.headings[t]),this.dt.data.data=this.dt.data.data.map(t=>e.map(a=>t[a])),this.settings=e.map(t=>this.settings[t]),this.dt.update()}hide(e){e.length&&(e.forEach(t=>{this.settings[t]||(this.settings[t]={type:"string"}),this.settings[t].hidden=!0}),this.dt.update())}show(e){e.length&&(e.forEach(t=>{this.settings[t]||(this.settings[t]={type:"string",sortable:!0}),delete this.settings[t].hidden}),this.dt.update())}visible(e){var t;return e===void 0&&(e=[...Array(this.dt.data.headings.length).keys()]),Array.isArray(e)?e.map(a=>{var s;return!((s=this.settings[a])!=null&&s.hidden)}):!((t=this.settings[e])!=null&&t.hidden)}add(e){const t=this.dt.data.headings.length;if(this.dt.data.headings=this.dt.data.headings.concat([de(e.heading)]),this.dt.data.data=this.dt.data.data.map((a,s)=>a.concat([ae(e.data[s],e)])),this.settings[t]={type:e.type||"string",sortable:!0,searchable:!0},e.type||e.format||e.sortable||e.render||e.filter){const a=this.settings[t];e.render&&(a.render=e.render),e.format&&(a.format=e.format),e.cellClass&&(a.cellClass=e.cellClass),e.headerClass&&(a.headerClass=e.headerClass),e.locale&&(a.locale=e.locale),e.sortable===!1?a.sortable=!1:(e.numeric&&(a.numeric=e.numeric),e.caseFirst&&(a.caseFirst=e.caseFirst)),e.searchable===!1?a.searchable=!1:e.sensitivity&&(a.sensitivity=e.sensitivity),(a.searchable||a.sortable)&&e.ignorePunctuation&&(a.ignorePunctuation=e.ignorePunctuation),e.hidden&&(a.hidden=!0),e.filter&&(a.filter=e.filter),e.sortSequence&&(a.sortSequence=e.sortSequence)}this.dt.update(!0)}remove(e){if(!Array.isArray(e))return this.remove([e]);this.dt.data.headings=this.dt.data.headings.filter((t,a)=>!e.includes(a)),this.dt.data.data=this.dt.data.data.map(t=>t.filter((a,s)=>!e.includes(s))),this.dt.update(!0)}filter(e,t=!1){var o,i;if(!((i=(o=this.settings[e])==null?void 0:o.filter)!=null&&i.length))return;const a=this._state.filters[e];let s;if(a){let l=!1;s=this.settings[e].filter.find(r=>!!l||(r===a&&(l=!0),!1))}else{const l=this.settings[e].filter;s=l?l[0]:void 0}s?this._state.filters[e]=s:a&&(this._state.filters[e]=void 0),this.dt._currentPage=1,this.dt.update(),t||this.dt.emit("datatable.filter",e,s)}sort(e,t,a=!1){var i;const s=this.settings[e];if(a||this.dt.emit("datatable.sorting",e,t),!t){const l=!(!this._state.sort||this._state.sort.column!==e)&&((i=this._state.sort)==null?void 0:i.dir),r=(s==null?void 0:s.sortSequence)||["asc","desc"];if(l){const d=r.indexOf(l);t=d===-1?r[0]||"asc":d===r.length-1?r[0]:r[d+1]}else t=r.length?r[0]:"asc"}const o=!!["string","html"].includes(s.type)&&new Intl.Collator(s.locale||this.dt.options.locale,{usage:"sort",numeric:s.numeric||this.dt.options.numeric,caseFirst:s.caseFirst||this.dt.options.caseFirst,ignorePunctuation:s.ignorePunctuation||this.dt.options.ignorePunctuation});this.dt.data.data.sort((l,r)=>{let d=l[e].order||l[e].data,p=r[e].order||r[e].data;if(t==="desc"){const y=d;d=p,p=y}return o?o.compare(String(d),String(p)):d<p?-1:d>p?1:0}),this._state.sort={column:e,dir:t},this.dt._searchQueries.length?(this.dt.multiSearch(this.dt._searchQueries),this.dt.emit("datatable.sort",e,t)):a||(this.dt._currentPage=1,this.dt.update(),this.dt.emit("datatable.sort",e,t))}_measureWidths(){var t,a,s,o;const e=this.dt.data.headings.filter((i,l)=>{var r;return!((r=this.settings[l])!=null&&r.hidden)});if((this.dt.options.scrollY.length||this.dt.options.fixedColumns)&&(e!=null&&e.length)){this._state.widths=[];const i={noPaging:!0};if(this.dt.options.header||this.dt.options.footer){this.dt.options.scrollY.length&&(i.unhideHeader=!0),this.dt.headerDOM&&this.dt.headerDOM.parentElement.removeChild(this.dt.headerDOM),i.noColumnWidths=!0,this.dt._renderTable(i);const l=Array.from(((a=(t=this.dt.dom.querySelector("thead, tfoot"))==null?void 0:t.firstElementChild)==null?void 0:a.querySelectorAll("th"))||[]);let r=0;const d=this.dt.data.headings.map((y,v)=>{var u;if((u=this.settings[v])!=null&&u.hidden)return 0;const m=l[r].offsetWidth;return r+=1,m}),p=d.reduce((y,v)=>y+v,0);this._state.widths=d.map(y=>y/p*100)}else{i.renderHeader=!0,this.dt._renderTable(i);const l=Array.from(((o=(s=this.dt.dom.querySelector("thead, tfoot"))==null?void 0:s.firstElementChild)==null?void 0:o.querySelectorAll("th"))||[]);let r=0;const d=this.dt.data.headings.map((y,v)=>{var u;if((u=this.settings[v])!=null&&u.hidden)return 0;const m=l[r].offsetWidth;return r+=1,m}),p=d.reduce((y,v)=>y+v,0);this._state.widths=d.map(y=>y/p*100)}this.dt._renderTable()}}}const ue={sortable:!0,locale:"en",numeric:!0,caseFirst:"false",searchable:!0,sensitivity:"base",ignorePunctuation:!0,destroyable:!0,isSplitQueryWord:!0,searchQuerySeparator:" ",data:{},type:"html",format:"YYYY-MM-DD",columns:[],paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"",nextText:"",firstText:"",lastText:"",ellipsisText:"",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,footer:!1,header:!0,hiddenHeader:!1,rowNavigation:!1,tabIndex:!1,pagerRender:!1,rowRender:!1,tableRender:!1,diffDomOptions:{valueDiffing:!1},labels:{placeholder:"Search...",searchTitle:"Search within table",perPage:"entries per page",noRows:"No entries found",noResults:"No results match your search query",info:"Showing {start} to {end} of {rows} entries"},template:(n,e)=>`<div class='${n.classes.top}'>
    ${n.paging&&n.perPageSelect?`<div class='${n.classes.dropdown}'>
            <label>
                <select class='${n.classes.selector}'></select> ${n.labels.perPage}
            </label>
        </div>`:""}
    ${n.searchable?`<div class='${n.classes.search}'>
            <input class='${n.classes.input}' placeholder='${n.labels.placeholder}' type='search' title='${n.labels.searchTitle}'${e.id?` aria-controls="${e.id}"`:""}>
        </div>`:""}
</div>
<div class='${n.classes.container}'${n.scrollY.length?` style='height: ${n.scrollY}; overflow-Y: auto;'`:""}></div>
<div class='${n.classes.bottom}'>
    ${n.paging?`<div class='${n.classes.info}'></div>`:""}
    <nav class='${n.classes.pagination}'></nav>
</div>`,classes:{active:"datatable-active",ascending:"datatable-ascending",bottom:"datatable-bottom",container:"datatable-container",cursor:"datatable-cursor",descending:"datatable-descending",disabled:"datatable-disabled",dropdown:"datatable-dropdown",ellipsis:"datatable-ellipsis",filter:"datatable-filter",filterActive:"datatable-filter-active",empty:"datatable-empty",headercontainer:"datatable-headercontainer",hidden:"datatable-hidden",info:"datatable-info",input:"datatable-input",loading:"datatable-loading",pagination:"datatable-pagination",paginationList:"datatable-pagination-list",paginationListItem:"datatable-pagination-list-item",paginationListItemLink:"datatable-pagination-list-item-link",search:"datatable-search",selector:"datatable-selector",sorter:"datatable-sorter",table:"datatable-table",top:"datatable-top",wrapper:"datatable-wrapper"}},oe=(n,e,t,a={})=>({nodeName:"LI",attributes:{class:a.active&&!a.hidden?`${t.classes.paginationListItem} ${t.classes.active}`:a.hidden?`${t.classes.paginationListItem} ${t.classes.hidden} ${t.classes.disabled}`:t.classes.paginationListItem},childNodes:[{nodeName:"A",attributes:{"data-page":String(n),class:t.classes.paginationListItemLink},childNodes:[{nodeName:"#text",data:e}]}]}),ea=(n,e,t,a,s)=>{let o=[];if(s.firstLast&&o.push(oe(1,s.firstText,s)),s.nextPrev){const l=n?1:t-1;o.push(oe(l,s.prevText,s,{hidden:n}))}let i=[...Array(a).keys()].map(l=>oe(l+1,String(l+1),s,{active:l===t-1}));if(s.truncatePager&&(i=((l,r,d,p)=>{const y=p.pagerDelta,v=p.classes,m=p.ellipsisText,u=2*y;let E=r-y,f=r+y;r<4-y+u?f=3+u:r>d-(3-y+u)&&(E=d-(2+u));const g=[];for(let T=1;T<=d;T++)if(T==1||T==d||T>=E&&T<=f){const b=l[T-1];g.push(b)}let c;const x=[];return g.forEach(T=>{const b=parseInt(T.childNodes[0].attributes["data-page"],10);if(c){const S=parseInt(c.childNodes[0].attributes["data-page"],10);if(b-S==2)x.push(l[S]);else if(b-S!=1){const D={nodeName:"LI",attributes:{class:`${v.paginationListItem} ${v.ellipsis} ${v.disabled}`},childNodes:[{nodeName:"A",attributes:{class:v.paginationListItemLink},childNodes:[{nodeName:"#text",data:m}]}]};x.push(D)}}x.push(T),c=T}),x})(i,t,a,s)),o=o.concat(i),s.nextPrev){const l=e?a:t+1;o.push(oe(l,s.nextText,s,{hidden:e}))}return s.firstLast&&o.push(oe(a,s.lastText,s)),{nodeName:"UL",attributes:{class:s.classes.paginationList},childNodes:i.length>1?o:[]}};class ta{constructor(e,t={}){const a=typeof e=="string"?document.querySelector(e):e;a instanceof HTMLTableElement?this.dom=a:(this.dom=document.createElement("table"),a.appendChild(this.dom));const s={...ue.diffDomOptions,...t.diffDomOptions},o={...ue.labels,...t.labels},i={...ue.classes,...t.classes};this.options={...ue,...t,diffDomOptions:s,labels:o,classes:i},this._initialInnerHTML=this.options.destroyable?this.dom.innerHTML:"",this.options.tabIndex?this.dom.tabIndex=this.options.tabIndex:this.options.rowNavigation&&this.dom.tabIndex===-1&&(this.dom.tabIndex=0),this._listeners={onResize:()=>this._onResize()},this._dd=new Xt(this.options.diffDomOptions||{}),this.initialized=!1,this._events={},this._currentPage=0,this.onFirstPage=!0,this.hasHeadings=!1,this.hasRows=!1,this._searchQueries=[],this.init()}init(){if(this.initialized||this.dom.classList.contains(this.options.classes.table))return!1;this._virtualDOM=ee(this.dom,this.options.diffDomOptions||{}),this._tableAttributes={...this._virtualDOM.attributes},this.rows=new Kt(this),this.columns=new Gt(this),this.data=Re(this.options.data,this.dom,this.columns.settings,this.options.type,this.options.format),this._render(),setTimeout(()=>{this.emit("datatable.init"),this.initialized=!0},10)}_render(){this.wrapperDOM=qe("div",{class:`${this.options.classes.wrapper} ${this.options.classes.loading}`}),this.wrapperDOM.innerHTML=this.options.template(this.options,this.dom);const e=this.wrapperDOM.querySelector(`select.${this.options.classes.selector}`);e&&this.options.paging&&this.options.perPageSelect?this.options.perPageSelect.forEach(t=>{const[a,s]=Array.isArray(t)?[t[0],t[1]]:[String(t),t],o=s===this.options.perPage,i=new Option(a,String(s),o,o);e.appendChild(i)}):e&&e.parentElement.removeChild(e),this.containerDOM=this.wrapperDOM.querySelector(`.${this.options.classes.container}`),this._pagerDOMs=[],Array.from(this.wrapperDOM.querySelectorAll(`.${this.options.classes.pagination}`)).forEach(t=>{t instanceof HTMLElement&&(t.innerHTML=`<ul class="${this.options.classes.paginationList}"></ul>`,this._pagerDOMs.push(t.firstElementChild))}),this._virtualPagerDOM={nodeName:"UL",attributes:{class:this.options.classes.paginationList}},this._label=this.wrapperDOM.querySelector(`.${this.options.classes.info}`),this.dom.parentElement.replaceChild(this.wrapperDOM,this.dom),this.containerDOM.appendChild(this.dom),this._rect=this.dom.getBoundingClientRect(),this._fixHeight(),this.options.header||this.wrapperDOM.classList.add("no-header"),this.options.footer||this.wrapperDOM.classList.add("no-footer"),this.options.sortable&&this.wrapperDOM.classList.add("sortable"),this.options.searchable&&this.wrapperDOM.classList.add("searchable"),this.options.fixedHeight&&this.wrapperDOM.classList.add("fixed-height"),this.options.fixedColumns&&this.wrapperDOM.classList.add("fixed-columns"),this._bindEvents(),this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}_renderTable(e={}){let t=Fe(this._tableAttributes,this.data.headings,(this.options.paging||this._searchQueries.length||this.columns._state.filters.length)&&this._currentPage&&this.pages.length&&!e.noPaging?this.pages[this._currentPage-1]:this.data.data.map((s,o)=>({row:s,index:o})),this.columns.settings,this.columns._state,this.rows.cursor,this.options,e);if(this.options.tableRender){const s=this.options.tableRender(this.data,t,"main");s&&(t=s)}const a=this._dd.diff(this._virtualDOM,t);this._dd.apply(this.dom,a),this._virtualDOM=t}_renderPage(e=!1){this.hasRows&&this.totalPages?(this._currentPage>this.totalPages&&(this._currentPage=1),this._renderTable(),this.onFirstPage=this._currentPage===1,this.onLastPage=this._currentPage===this.lastPage):this.setMessage(this.options.labels.noRows);let t,a=0,s=0,o=0;if(this.totalPages&&(a=this._currentPage-1,s=a*this.options.perPage,o=s+this.pages[a].length,s+=1,t=this._searchQueries.length?this._searchData.length:this.data.data.length),this._label&&this.options.labels.info.length){const i=this.options.labels.info.replace("{start}",String(s)).replace("{end}",String(o)).replace("{page}",String(this._currentPage)).replace("{pages}",String(this.totalPages)).replace("{rows}",String(t));this._label.innerHTML=t?i:""}if(this._currentPage==1&&this._fixHeight(),this.options.rowNavigation&&this._currentPage&&(!this.rows.cursor||!this.pages[this._currentPage-1].find(i=>i.index===this.rows.cursor))){const i=this.pages[this._currentPage-1];i.length&&(e?this.rows.setCursor(i[i.length-1].index):this.rows.setCursor(i[0].index))}}_renderPagers(){if(!this.options.paging)return;let e=ea(this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages,this.options);if(this.options.pagerRender){const a=this.options.pagerRender([this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages],e);a&&(e=a)}const t=this._dd.diff(this._virtualPagerDOM,e);this._pagerDOMs.forEach(a=>{this._dd.apply(a,t)}),this._virtualPagerDOM=e}_renderSeparateHeader(){const e=this.dom.parentElement;this.headerDOM||(this.headerDOM=document.createElement("div"),this._virtualHeaderDOM={nodeName:"DIV"}),e.parentElement.insertBefore(this.headerDOM,e);let t={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[De(this.data.headings,this.columns.settings,this.columns._state,this.options,{unhideHeader:!0})]}]};if(t.attributes.class=t.attributes.class?`${t.attributes.class} ${this.options.classes.table}`:this.options.classes.table,this.options.tableRender){const i=this.options.tableRender(this.data,t,"header");i&&(t=i)}const a={nodeName:"DIV",attributes:{class:this.options.classes.headercontainer},childNodes:[t]},s=this._dd.diff(this._virtualHeaderDOM,a);this._dd.apply(this.headerDOM,s),this._virtualHeaderDOM=a;const o=this.headerDOM.firstElementChild.clientWidth-this.dom.clientWidth;if(o){const i=structuredClone(this._virtualHeaderDOM);i.attributes.style=`padding-right: ${o}px;`;const l=this._dd.diff(this._virtualHeaderDOM,i);this._dd.apply(this.headerDOM,l),this._virtualHeaderDOM=i}e.scrollHeight>e.clientHeight&&(e.style.overflowY="scroll")}_bindEvents(){if(this.options.perPageSelect){const e=this.wrapperDOM.querySelector(`select.${this.options.classes.selector}`);e&&e instanceof HTMLSelectElement&&e.addEventListener("change",()=>{this.options.perPage=parseInt(e.value,10),this.update(),this._fixHeight(),this.emit("datatable.perpage",this.options.perPage)},!1)}this.options.searchable&&this.wrapperDOM.addEventListener("input",e=>{const t=e.target;if(!(t instanceof HTMLInputElement&&t.matches(`.${this.options.classes.input}`)))return;e.preventDefault();const a=Array.from(this.wrapperDOM.querySelectorAll(`.${this.options.classes.input}`)).filter(s=>s.value.length).map(s=>s.dataset.columns?{term:s.value,columns:JSON.parse(s.dataset.columns)}:{term:s.value,columns:void 0});if(a.length===1){const s=a[0];this.search(s.term,s.columns)}else this.multiSearch(a)}),this.wrapperDOM.addEventListener("click",e=>{const t=e.target.closest("a");if(t){if(t.hasAttribute("data-page"))this.page(parseInt(t.getAttribute("data-page"),10)),e.preventDefault();else if(t.classList.contains(this.options.classes.sorter)){const a=Array.from(t.parentElement.parentElement.children).indexOf(t.parentElement),s=$e(a,this.columns.settings);this.columns.sort(s),e.preventDefault()}else if(t.classList.contains(this.options.classes.filter)){const a=Array.from(t.parentElement.parentElement.children).indexOf(t.parentElement),s=$e(a,this.columns.settings);this.columns.filter(s),e.preventDefault()}}},!1),this.options.rowNavigation?(this.dom.addEventListener("keydown",e=>{if(e.key==="ArrowUp"){let t;e.preventDefault(),e.stopPropagation(),this.pages[this._currentPage-1].find(a=>a.index===this.rows.cursor||(t=a,!1)),t?this.rows.setCursor(t.index):this.onFirstPage||this.page(this._currentPage-1,!0)}else if(e.key==="ArrowDown"){let t;e.preventDefault(),e.stopPropagation();const a=this.pages[this._currentPage-1].find(s=>!!t||(s.index===this.rows.cursor&&(t=!0),!1));a?this.rows.setCursor(a.index):this.onLastPage||this.page(this._currentPage+1)}else["Enter"," "].includes(e.key)&&this.emit("datatable.selectrow",this.rows.cursor,e)}),this.dom.addEventListener("mousedown",e=>{const t=e.target;if(t instanceof Element&&this.dom.matches(":focus")){const a=Array.from(this.dom.querySelectorAll("body tr")).find(s=>s.contains(t));a&&a instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(a.dataset.index,10),e)}})):this.dom.addEventListener("mousedown",e=>{const t=e.target;if(!(t instanceof Element))return;const a=Array.from(this.dom.querySelectorAll("body tr")).find(s=>s.contains(t));a&&a instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(a.dataset.index,10),e)}),window.addEventListener("resize",this._listeners.onResize)}_onResize(){this._rect=this.containerDOM.getBoundingClientRect(),this._rect.width&&this.update(!0)}destroy(){this.options.destroyable&&(this.dom.innerHTML=this._initialInnerHTML,this.dom.classList.remove(this.options.classes.table),this.wrapperDOM.parentElement&&this.wrapperDOM.parentElement.replaceChild(this.dom,this.wrapperDOM),this.initialized=!1,window.removeEventListener("resize",this._listeners.onResize))}update(e=!1){e&&(this.columns._measureWidths(),this.hasRows=!!this.data.data.length,this.hasHeadings=!!this.data.headings.length),this.wrapperDOM.classList.remove(this.options.classes.empty),this._paginate(),this._renderPage(),this._renderPagers(),this.options.scrollY.length&&this._renderSeparateHeader(),this.emit("datatable.update")}_paginate(){let e=this.data.data.map((t,a)=>({row:t,index:a}));return this._searchQueries.length&&(e=[],this._searchData.forEach(t=>e.push({index:t,row:this.data.data[t]}))),this.columns._state.filters.length&&this.columns._state.filters.forEach((t,a)=>{t&&(e=e.filter(s=>typeof t=="function"?t(s.row[a].data):(s.row[a].text??s.row[a].data)===t))}),this.options.paging&&this.options.perPage>0?this.pages=e.map((t,a)=>a%this.options.perPage==0?e.slice(a,a+this.options.perPage):null).filter(t=>t):this.pages=[e],this.totalPages=this.lastPage=this.pages.length,this._currentPage||(this._currentPage=1),this.totalPages}_fixHeight(){this.options.fixedHeight&&(this.containerDOM.style.height=null,this._rect=this.containerDOM.getBoundingClientRect(),this.containerDOM.style.height=`${this._rect.height}px`)}search(e,t){if(!e.length)return this._currentPage=1,this._searchQueries=[],this._searchData=[],this.update(),this.emit("datatable.search","",[]),this.wrapperDOM.classList.remove("search-results"),!1;this.multiSearch([{term:e,columns:t||void 0}]),this.emit("datatable.search",e,this._searchData)}multiSearch(e){if(!this.hasRows)return!1;if(this._currentPage=1,this._searchQueries=e,this._searchData=[],!(e=e.filter(a=>a.term.length)).length)return this.update(),this.emit("datatable.multisearch",e,this._searchData),this.wrapperDOM.classList.remove("search-results"),!1;const t=e.map(a=>this.columns.settings.map((s,o)=>{if(s.hidden||!s.searchable||a.columns&&!a.columns.includes(o))return!1;let i=a.term;const l=s.sensitivity||this.options.sensitivity;return["base","accent"].includes(l)&&(i=i.toLowerCase()),["base","case"].includes(l)&&(i=i.normalize("NFD").replace(/\p{Diacritic}/gu,"")),(s.ignorePunctuation||this.options.ignorePunctuation)&&(i=i.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,"")),i}));this.data.data.forEach((a,s)=>{const o=a.map((i,l)=>{let r=(i.text||String(i.data)).trim();if(r.length){const d=this.columns.settings[l],p=d.sensitivity||this.options.sensitivity;["base","accent"].includes(p)&&(r=r.toLowerCase()),["base","case"].includes(p)&&(r=r.normalize("NFD").replace(/\p{Diacritic}/gu,"")),(d.ignorePunctuation||this.options.ignorePunctuation)&&(r=r.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,""))}return r});t.every(i=>i.find((l,r)=>!!l&&(this.columns.settings[r].isSplitQueryWord?l.split(this.columns.settings[r].searchQuerySeparator):[l]).find(d=>o[r].includes(d.trim()))))&&this._searchData.push(s)}),this.wrapperDOM.classList.add("search-results"),this._searchData.length?this.update():(this.wrapperDOM.classList.remove("search-results"),this.setMessage(this.options.labels.noResults)),this.emit("datatable.multisearch",e,this._searchData)}page(e,t=!1){return e!==this._currentPage&&(isNaN(e)||(this._currentPage=e),!(e>this.pages.length||e<0)&&(this._renderPage(t),this._renderPagers(),void this.emit("datatable.page",e)))}insert(e){let t=[];if(Array.isArray(e)){const a=this.data.headings.map(s=>s.text??String(s.data));e.forEach((s,o)=>{const i=[];Object.entries(s).forEach(([l,r])=>{const d=a.indexOf(l);d>-1?i[d]=ae(r,this.columns.settings[d]):this.hasHeadings||this.hasRows||o!==0||(i[a.length]=ae(r,this.columns.settings[a.length]),a.push(l),this.data.headings.push(de(l)))}),t.push(i)})}else Ft(e)&&(!e.headings||this.hasHeadings||this.hasRows?e.data&&Array.isArray(e.data)&&(t=e.data.map(a=>a.map((s,o)=>ae(s,this.columns.settings[o])))):this.data=Re(e,void 0,this.columns.settings,this.options.type,this.options.format));t.length&&t.forEach(a=>this.data.data.push(a)),this.hasHeadings=!!this.data.headings.length,this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}refresh(){this.options.searchable&&(Array.from(this.wrapperDOM.querySelectorAll(`.${this.options.classes.input}`)).forEach(e=>{e.value=""}),this._searchQueries=[]),this._currentPage=1,this.onFirstPage=!0,this.update(!0),this.emit("datatable.refresh")}print(){const e=qe("table");let t=Fe(this._tableAttributes,this.data.headings,this.data.data.map((o,i)=>({row:o,index:i})),this.columns.settings,this.columns._state,!1,this.options,{noColumnWidths:!0,unhideHeader:!0});if(this.options.tableRender){const o=this.options.tableRender(this.data,t,"print");o&&(t=o)}const a=this._dd.diff({nodeName:"TABLE"},t);this._dd.apply(e,a);const s=window.open();s.document.body.appendChild(e),s.print()}setMessage(e){const t=this.data.headings.filter((o,i)=>{var l;return!((l=this.columns.settings[i])!=null&&l.hidden)}).length||1;this.wrapperDOM.classList.add(this.options.classes.empty),this._label&&(this._label.innerHTML=""),this.totalPages=0,this._renderPagers();let a={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[De(this.data.headings,this.columns.settings,this.columns._state,this.options,{})]},{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",attributes:{class:this.options.classes.empty,colspan:String(t)},childNodes:[{nodeName:"#text",data:e}]}]}]}]};if(a.attributes.class=a.attributes.class?`${a.attributes.class} ${this.options.classes.table}`:this.options.classes.table,this.options.tableRender){const o=this.options.tableRender(this.data,a,"message");o&&(a=o)}const s=this._dd.diff(this._virtualDOM,a);this._dd.apply(this.dom,s),this._virtualDOM=a}on(e,t){this._events[e]=this._events[e]||[],this._events[e].push(t)}off(e,t){e in this._events&&this._events[e].splice(this._events[e].indexOf(t),1)}emit(e,...t){if(e in this._events)for(let a=0;a<this._events[e].length;a++)this._events[e][a](...t)}}let aa=["jpg","jpeg","png","webp","gif"];Ht(".fm-manga .dropzone #choose",aa);const ie={silent:!0,allowHTML:!0,removeItems:!0,removeItemButton:!0,searchEnabled:!1,searchFloor:1,position:"auto",resetScrollPosition:!0,searchResultLimit:2,searchFields:["label","value"],duplicateItemsAllowed:!1,addItemText:n=>`Presiona Enter para aadir <b>"${n}"</b>`,position:"auto",loadingText:"Cargando...",noResultsText:"No se han encontrado resultados",noChoicesText:"No hay opciones para elegir",itemSelectText:"Presione para seleccionar",uniqueItemText:"Solo se pueden agregar valores nicos",customAddItemText:"Solo se pueden agregar valores que coincidan con condiciones especficas"},gt={header:{class:EditorJsHeader,inlineToolbar:!0},list:EditorJsList,table:EditorJsTable,checklist:EditorJsChecklist,underline:{class:EditorJsUnderline,inlineToolbar:!0},raw:EditorJsRaw,quote:{class:EditorJsQuote,inlineToolbar:!0},inlineCode:EditorJsInlineCode,embed:EditorJsEmbed,code:EditorJsCode,warning:EditorJsWarning,image:EditorJsSimpleImage,Color:{class:EditorJsColor,config:{colorCollections:["#EC7878","#9C27B0","#673AB7","#3F51B5","#0070FF","#03A9F4","#00BCD4","#4CAF50","#8BC34A","#CDDC39","#FFF"],defaultColor:"#FF1300",type:"text",customPicker:!0}},Marker:{class:EditorJsColor,config:{defaultColor:"#FFBF00",type:"marker",icon:'<svg fill="#000000" height="200px" width="200px" version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M17.6,6L6.9,16.7c-0.2,0.2-0.3,0.4-0.3,0.6L6,23.9c0,0.3,0.1,0.6,0.3,0.8C6.5,24.9,6.7,25,7,25c0,0,0.1,0,0.1,0l6.6-0.6 c0.2,0,0.5-0.1,0.6-0.3L25,13.4L17.6,6z"></path> <path d="M26.4,12l1.4-1.4c1.2-1.2,1.1-3.1-0.1-4.3l-3-3c-0.6-0.6-1.3-0.9-2.2-0.9c-0.8,0-1.6,0.3-2.2,0.9L19,4.6L26.4,12z"></path> </g> <g> <path d="M28,29H4c-0.6,0-1-0.4-1-1s0.4-1,1-1h24c0.6,0,1,0.4,1,1S28.6,29,28,29z"></path> </g> </g></svg>'}}},Be=document.querySelector("#m-tags"),Ye=document.querySelector("#m-categories"),We=document.querySelector("#m-mangatype"),Ue=document.querySelector("#m-bookstatus"),Je=document.querySelector("#m-demography");Be&&Ye&&We&&Ue&&Je&&(new Choices(Be,ie),new Choices(Ye,ie),new Choices(We,ie),new Choices(Ue,ie),new Choices(Je,ie));let na=document.querySelector("#field-date");na&&new AirDatepicker("#field-date",{locale:localeEs,dateFormat:"yyyy-MM-dd"});let Me=/[^a-zA-Z0-9]+/g,sa=document.querySelector(".fm-create");if(sa){let n=document.querySelector("#m-name"),e=document.querySelector("#m-slug");n.addEventListener("input",function(t){let a=t.target.value;e.value=a.replace(Me,"-").toLowerCase()}),e.addEventListener("input",function(t){let a=t.target.value;e.value=a.replace(Me,"-").toLowerCase()})}let re=document.getElementById("modalChapter");if(re){let n=document.querySelector("#ct-name"),e=document.querySelector("#ct-slug");document.querySelector("#ct-images"),document.querySelectorAll('#modalChapter form input[name="chaptertype"]');let t;document.querySelector("main.main .box .frmo.fm-manga .main .section.chapters .buttons a#ct-chapter").addEventListener("click",function(f){f.preventDefault(),t=new EditorJS({holder:"createChapterContent",tools:gt}),re.addClass("opn"),ct()}),document.addEventListener("click",function(f){f.target.matches("#modalChapter .md-close")&&(f.preventDefault(),t.destroy(),re.addClass("clg"),re.removeClass("opn"),Ne())});let s=document.querySelector("#t-preview"),o=document.querySelectorAll("main.main .box #modalChapter .md-content form .group .radios label input"),i=document.querySelector("#t-manga"),l=document.querySelector("#t-novel");o.forEach(f=>{f.addEventListener("click",function(g){g.target.value=="novel"&&(i.addClass("hidden"),l.removeClass("hidden")),g.target.value=="manga"&&(l.addClass("hidden"),i.removeClass("hidden"))})});let r=document.querySelector("#modalChapter form"),d=/[^a-zA-Z0-9]+/g;n.addEventListener("input",function(f){let g=f.target.value;e.value=g.replace(d,"-").toLowerCase()}),e.addEventListener("input",function(f){let g=f.target.value;e.value=g.replace(d,"-").toLowerCase()});let p=[],y=["jpeg","jpg","png","gif"];const v=function(f,g){const c=document.querySelector(f);let x;c&&(x=c.nextElementSibling,x.addEventListener("change",function(T){p.push(...T.target.files),p.length>0&&(p=m(p,g),je(p),console.log(p))}),c.addEventListener("click",()=>x.click()),c.addEventListener("dragover",T=>{T.preventDefault()}),c.addEventListener("drop",T=>{T.preventDefault(),p.push(...T.dataTransfer.files),p.length>0&&(p=m(p,g),je(p))}))},m=function(f,g){let c=[];if(!f)return console.log("error, no hay archivos"),[];for(let x=0;x<f.length;x++){let T=f[x].name.split(".").pop().toLowerCase();if(!g.includes(T)){console.log(f[x].name,"Tipo de archivo no permitido");continue}c.push(f[x])}return c};v("#modalChapter #t-preview .choose",y);const u=new DgSortable(s,{draggable:".item",mirror:{constrainDimensions:!0}});Array.prototype.movePreview=function(f,g){console.log(this),this.splice(g,0,this.splice(f,1)[0]);for(let c=0;c<this.length;c++){let x=this[c].name.split("."),T=Date.now()+c;x[0].replace(/[0-9-]/g,`${c}-`),this[c]=new File([this[c]],`${c}-${T}.${x[1]}`)}},u.on("sortable:sorted",f=>{let g=f.data.newIndex,c=f.data.oldIndex;p.movePreview(c,g),console.log(p)}),u.on("sortable:stop",()=>{setTimeout(()=>{let f=document.querySelectorAll("#modalChapter .md-content form .group #t-preview .item");for(let g=0;g<f.length;g++)f[g].setAttribute("id","image-"+g),f[g].setAttribute("index",g),f[g].children[1].setAttribute("data-index",g)},300)});const E=function(f,g){document.querySelector("#image-"+g).remove();let x=document.querySelectorAll("#modalChapter .md-content form .group #t-preview .item");f.splice(g,1);for(let T=0;T<f.length;T++){let b=f[T].name.split("."),S=Date.now()+T;b[0].replace(/[0-9-]/g,`${T}-`),x[T].setAttribute("id","image-"+T),x[T].setAttribute("index",T),x[T].children[1].setAttribute("data-index",T),f[T]=new File([f[T]],`${T}-${S}.${b[1]}`)}return f};document.addEventListener("click",function(f){if(!f.target.matches(".c-remove"))return;f.preventDefault();let g=f.target.getAttribute("data-index");p=E(p,g)}),r.addEventListener("submit",async function(f){if(f.preventDefault(),n.value=="")return n.focus(),n.addClass("error"),Toastify({text:"Campo nombre requerido",className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!0;if(n.removeClass("error"),e.value=="")return e.focus(),e.addClass("error"),Toastify({text:"Campo slug requerido",className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!0;e.removeClass("error");let g=document.querySelector("#modalChapter form"),c=document.querySelector(".fm-manga form .chapters .list .simplebar-content"),x=new FormData(g),T=x.get("_token"),b=x.get("name"),S=x.get("slug"),D=x.get("disk"),N=x.get("chaptertype"),V=x.get("price"),O="";await t.save().then(h=>h).then(h=>{O=h}).catch(h=>{console.log("Saving failed: ",h)});let C=document.querySelector("#modalChapter .radios input:checked");if(C.value=="manga"){if(p.length<1)return Toastify({text:"Debes agregar una imagen por lo menos.",className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!0}else if(C.value=="novel"&&O.blocks.length<1)return Toastify({text:"Debes agregar contenido por lo menos.",className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!0;x.append("content",JSON.stringify(O));let w=x.get("content");await axios.post(g.action,{_token:T,name:b,slug:S,price:V,disk:D,chaptertype:N,content:w,images:p},{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"multipart/form-data"}}).then(function(h){let L=h.data;if(L.excluded&&L.excluded.forEach(M=>{Toastify({text:M,className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"bottom",position:"right"}).showToast()}),h.data.status=="success"){Toastify({text:h.data.msg,className:"success",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let _=h.data.item,M=h.data.manga_slug,k=document.createElement("div");k.classList.add("item"),k.setAttribute("id","m-"+_.id),k.innerHTML=`
                    <div class="name">
                        ${_.name}
                    </div>
                    <div class="actions">
                        <a href="${route("chapter_viewer.index",{manga_slug:M,chapter_slug:_.slug})}" data-id="${_.id}" class="botn view" target="_blank">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-player-play" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <path d="M7 4v16l13 -8z" />
                            </svg>
                        </a>
                        <a href="#" data-id="${_.id}" class="botn edit">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-pencil" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
                                <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
                            </svg>
                        </a>
                        <a href="#" data-id="${_.id}" class="botn delete">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <line x1="4" y1="7" x2="20" y2="7" />
                                <line x1="10" y1="11" x2="10" y2="17" />
                                <line x1="14" y1="11" x2="14" y2="17" />
                                <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                                <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                            </svg>
                        </a>
                    </div>
                `,c.append(k),setTimeout(function(){p=[],Oe(),Ne(),g.reset(),re.removeClass("opn")},1e3)}else h.data.status=="error"&&Toastify({text:h.data.msg,className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"bottom",position:"right"}).showToast();console.log(h)}).catch(function(h){console.log("error: ",h)})})}function je(n){Oe();let e=document.querySelector("#t-preview"),t=document.querySelector("#t-preview .item:last-of-type"),a;t?a=Number(t.getAttribute("index"))+1:a=0;for(let s=0;s<n.length;s++){let o=URL.createObjectURL(n[s]),i=document.createElement("div"),l=a+s;i.addClass("item"),i.setAttribute("id","image-"+l),i.setAttribute("index",l),i.innerHTML=`
            <img src="${o}" alt="preview" />
            <div class="c-remove" data-index="${l}">
                <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
            </div>
        `,e.append(i)}}function Oe(){let n=document.querySelectorAll("#t-preview .item");n&&n.forEach(e=>{e.remove()})}const ze=document.querySelector(".frmo.fm-manga .main .section.chapters .buttons a#popup-chapter");if(ze){const n=document.querySelector(".frmo.fm-manga .main .section.chapters .chapter__upload");ze.addEventListener("click",function(e){e.preventDefault(),slideToggle(n)})}let oa=["zip"];ia(".fm-manga .upload #upload-chapter",oa);function ia(n,e){const t=document.querySelector(n);let a;t&&(a=t.nextElementSibling,a.addEventListener("change",function(s){const o=this.files[0];Qe(o,e)}),t.addEventListener("click",()=>a.click()),t.addEventListener("dragover",s=>{s.preventDefault()}),t.addEventListener("drop",s=>{s.preventDefault();const o=s.dataTransfer.files[0];Qe(o,e)}))}function Qe(n,e){if(!n)return console.log("error, no hay archivo"),"error";let t=n.name.split(".").pop().toLowerCase();if(!e.includes(t))return alert("Tipo de archivo no permitido"),"no allowed";let a=document.querySelector("#inpt-chapter"),s=a.getAttribute("data-id"),o=new FormData,i=document.querySelector(".fm-manga form .chapters .list .simplebar-content"),l=document.querySelector(".frmo.fm-manga .main .section.chapters .chapter__upload .disks input:checked");o.set("disk",l.value),o.append("chapters",a.files[0]),axios.post(route("uploadChapter.store",[s]),o,{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(r){console.log(r);let d=r.data;d.excluded&&d.excluded.forEach(v=>{Toastify({text:v,className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"bottom",position:"right"}).showToast()});let p=d.created;if(p)p.forEach(y=>{Toastify({text:y.msg,className:"success",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast()}),p.forEach(y=>{let v=y.item,m=y.manga_slug,u=document.createElement("div");u.classList.add("item"),u.setAttribute("id","m-"+v.id),u.innerHTML=`
                    <div class="name">
                        ${v.name}
                    </div>
                    <div class="actions">
                        <a href="${route("chapter_viewer.index",{manga_slug:m,chapter_slug:v.slug})}" data-id="${v.id}" class="botn view" target="_blank">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-player-play" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <path d="M7 4v16l13 -8z" />
                            </svg>
                        </a>
                        <a href="#" data-id="${v.id}" class="botn edit">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-pencil" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
                                <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
                            </svg>
                        </a>
                        <a href="#" data-id="${v.id}" class="botn delete">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <line x1="4" y1="7" x2="20" y2="7" />
                                <line x1="10" y1="11" x2="10" y2="17" />
                                <line x1="14" y1="11" x2="14" y2="17" />
                                <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                                <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                            </svg>
                        </a>
                    </div>
                `,i.append(u)});else{let y=r.data.error;y&&y.forEach(v=>{Toastify({text:v,className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"bottom",position:"right"}).showToast()})}document.querySelector("#inpt-chapter").value=""}).catch(function(r){console.log(r)})}let B=new pe;document.addEventListener("click",function(n){if(!n.target.matches(".mangaDelete"))return;n.preventDefault();let e=n.target.getAttribute("data-id");B.fire({type:"warning",title:"Seguro que deseas eliminar?",text:"No podrs revertir esto!",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.confirmed&&axios.delete(route("manga.destroy",[e]),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(a){Toastify({text:a.data.msg,className:"success",duration:1e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let s=document.querySelector(".alertify"),o=document.querySelector(".al-overlay");B.close(s,o),setTimeout(()=>{window.location.href=route("manga.index")},1e3)}).catch(function(a){console.log(a)})}).catch(t=>{console.log(t)})});document.querySelectorAll("main.main .box .frmo.fm-manga .main .section.chapters .list .item .actions .botn.delete");document.addEventListener("click",function(n){if(!n.target.matches(".botn.delete"))return;n.preventDefault();let e=n.target.getAttribute("data-id");B.fire({type:"warning",title:"Eliminar captulo?",text:"No podrs revertir esto!",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.confirmed&&axios.delete(route("chapters.destroy",[e]),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(a){Toastify({text:a.data.msg,className:"success",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let s=document.querySelector(".alertify"),o=document.querySelector(".al-overlay");B.close(s,o),document.querySelector("#m-"+a.data.id).remove()}).catch(function(a){console.log(a)})}).catch(t=>{console.log(t)})});document.addEventListener("click",function(n){if(!n.target.matches(".botn.edit"))return;n.preventDefault();let e=n.target.getAttribute("data-id"),t=document.querySelector('meta[name="csrf-token"]').getAttribute("content");axios.post(route("chapters.show",[e]),{headers:{"X-CSRF-TOKEN":t}}).then(function(a){if(ct(),a.status==200){let{chapter:s}=a.data,o=document.querySelector(".main.main .box"),i=document.createElement("div");const l=s.disk;let r=[];s.images&&(r=JSON.parse(s.images));let d=document.querySelector("#u-preview .item:last-of-type"),p;d?p=Number(d.getAttribute("index"))+1:p=0,i.setAttribute("id","updateChapter"),i.addClass("modal-chapter opn");let y;switch(l){case"ftp":y="";break;case"sftp":y={}.VITE_SFTP_URL;break;case"s3":y={}.VITE_S3_URL;break;default:y="http://localhost:8000/storage/";break}i.innerHTML=`
                <div class="md-title">
                    <h4>Actualizar captulo</h4>
                    <div class="md-close">
                        <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                    </div>
                </div>
                <div class="md-content">
                    <form action="${route("chapters.update",[s.id])}" method="post" enctype="multipart/form-data">
                        <input type="hidden" name="_token" value="${t}">
                        <div class="group">
                            <label for="ct-name">Name</label>
                            <input type="text" name="name" id="ct-name" value="${s.name}">
                        </div>
                        <div class="group">
                            <label for="ct-slug">Slug</label>
                            <input type="text" name="slug" id="ct-slug" value="${s.slug}">
                        </div>
                        <div class="group range">
                            <label>Price</label>
                            <input type="number" name="price" id="ct-range" value="${s.price?Number(s.price):""}">
                        </div>
                        <div class="group type">
                            <label>Tipo</label>
                            <div class="radios rdos">
                                <label for="rd-1">
                                    <input type="radio" name="chaptertype" value="manga" id="rd-1" ${s.type=="manga"?"checked":""}>
                                    <div class="rdo">
                                        <div class="inpt"></div>
                                        <div class="name">Manga</div>
                                    </div>
                                </label>
                                <label for="rd-0">
                                    <input type="radio" name="chaptertype" value="novel" id="rd-0" ${s.type=="novel"?"checked":""}>
                                    <div class="rdo">
                                        <div class="inpt"></div>
                                        <div class="name">Novela</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <div class="group upload">
                            <label>Subir a</label>
                            <div class="disks rdos">
                                <label for="erdo-1">
                                    <input type="radio" name="disk" value="public" id="erdo-1" ${s.disk=="public"?"checked":""}>
                                    <div class="rdo">
                                        <div class="inpt"></div>
                                        <div class="name">Local</div>
                                    </div>
                                </label>
                                
                                
                                ${{}.VITE_S3_HOST&&{}.VITE_S3_HOST!=""?`
                                    <label for="erdo-4">
                                        <input type="radio" name="disk" value="s3" id="erdo-4" ${s.disk=="s3"?"checked":""}>
                                        <div class="rdo">
                                            <div class="inpt"></div>
                                            <div class="name">Amazon S3</div>
                                        </div>
                                    </label>
                                `:""}
                            </div>
                        </div>
                        <div class="group ${s.type=="novel"?"":"hidden"}" id="u-novel">
                            <label for="ct-content">Contenido</label>
                            <div id="chapterContent"></div>
                        </div>
                        <div class="group ${s.type=="manga"?"":"hidden"}" id="u-manga">
                            <label for="ct-iamges">Images</label>
                            <div id="u-preview">
                                <div class="file">
                                    <div class="choose">Agregar</div>
                                    <input type="file" name="images[]" accept="image/*" multiple id="ct-images"/>
                                </div>
                                ${s.images?r.map((b,S)=>`
                                    <div class="item" id="image-${p+S}" index="${p+S}">
                                        <img src="${y+b}" alt="preview" />
                                        <div class="u-remove" data-index="${p+S}">
                                            <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                                        </div>
                                    </div>
                                `).join(""):""}
                            </div>
                        </div>
                        <!-- Modal footer -->
                        <div class="md-buttons flex items-center space-x-2">
                            <button type="submit" class="text-white bg-vo-green font-medium rounded-lg text-sm px-5 py-2.5 text-center hover:bg-vo-green-over" id="updateChapter">Guardar</button>
                        </div>
                    </form>
                </div>
            `,o.append(i);const v=new EditorJS({holder:"chapterContent",tools:gt});if(s.content){let b=JSON.parse(s.content);b.blocks.length>0&&setTimeout(()=>{v.blocks.render(b)},1e3)}let m=document.querySelector("#updateChapter #ct-slug");m.addEventListener("input",function(b){let S=b.target.value;m.value=S.replace(Me,"-").toLowerCase()});let u=[],E=["jpeg","jpg","png","gif"];const f=function(b,S){const D=document.querySelector(b);let N;D&&(N=D.nextElementSibling,N.addEventListener("change",function(V){u=[],u.push(...V.target.files),u.length>0&&(u=g(u,S),Xe(u,e,s.id))}),D.addEventListener("click",()=>N.click()),D.addEventListener("dragover",V=>{V.preventDefault()}),D.addEventListener("drop",V=>{V.preventDefault(),u=[],u.push(...V.dataTransfer.files),u.length>0&&(u=g(u,S),Xe(u,e,s.id))}))},g=function(b,S){let D=[];if(!b)return console.log("error, no hay archivos"),[];for(let N=0;N<b.length;N++){let V=b[N].name.split(".").pop().toLowerCase();if(!S.includes(V)){console.log(b[N].name,"Tipo de archivo no permitido");continue}D.push(b[N])}return D};f("#updateChapter #u-preview .choose",E);let c=document.querySelector("#u-preview");const x=new DgSortable(c,{draggable:".item",mirror:{constrainDimensions:!0}});Array.prototype.organizarImagenes=function(b,S){this.splice(S,0,this.splice(b,1)[0])},x.on("sortable:sorted",b=>{let S=b.data.newIndex,D=b.data.oldIndex;r.organizarImagenes(D,S)}),x.on("sortable:stop",()=>{setTimeout(()=>{let b=document.querySelectorAll("#updateChapter .md-content form .group #u-preview .item");for(let S=0;S<b.length;S++)b[S].setAttribute("id","image-"+S),b[S].setAttribute("index",S),b[S].children[1].setAttribute("data-index",S);b.length>1&&axios.post(route("actualizarOrdenChapter.imagenes",[e]),{images:r},{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(S){console.log(S),Toastify({text:"Orden actualizado",className:"success",duration:2e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast()}).catch(function(S){console.log("error: ",S)})},300)});const T=function(b,S,D){var O,C,w;axios.post(route("eliminarChapter.imagenes",[D]),{index:S},{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(h){console.log(h);let L=document.querySelector("#updateChapter #ct-images");u=[],L.value="",Toastify({text:"Imagen eliminada",className:"success",duration:2e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast()}).catch(function(h){console.log("error: ",h)});let N=document.querySelector("#updateChapter #u-preview #image-"+S);N==null||N.remove();let V=document.querySelectorAll("#updateChapter .md-content form .group #u-preview .item");b.splice(S,1);for(let h=0;h<b.length;h++)(O=V[h])==null||O.setAttribute("id","image-"+h),(C=V[h])==null||C.setAttribute("index",h),(w=V[h])==null||w.children[1].setAttribute("data-index",h);return b};document.addEventListener("click",function(b){if(!b.target.matches(".u-remove"))return;b.preventDefault();let S=b.target.getAttribute("data-index");r=T(r,S,s.id)}),document.addEventListener("click",function(b){b.target.matches("#updateChapter .md-close")&&(b.preventDefault(),v&&v.destroy(),ra())}),document.addEventListener("click",function(b){if(!b.target.matches("#updateChapter .md-content form .radios label input"))return;let S=document.querySelector("#u-manga"),D=document.querySelector("#u-novel");b.target.value=="novel"&&(S.addClass("hidden"),D.removeClass("hidden")),b.target.value=="manga"&&(D.addClass("hidden"),S.removeClass("hidden"))}),document.addEventListener("click",async function(b){if(!b.target.matches("#updateChapter"))return;b.preventDefault();let S=document.querySelector("#updateChapter #ct-name"),D=document.querySelector("#updateChapter #ct-slug");if(S.value=="")return S.focus(),S.addClass("error"),Toastify({text:"Campo nombre requerido",className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!0;if(S.removeClass("error"),D.value=="")return D.focus(),D.addClass("error"),Toastify({text:"Campo slug requerido",className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!0;D.removeClass("error");let N="",V=document.querySelector("#updateChapter .radios input:checked");if(V.value=="manga"&&u.length<1&&r.length<1)return Toastify({text:"Debes agregar una imagen por lo menos.",className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!0;if(V.value=="novel"&&N.blocks&&N.blocks.length<1)return Toastify({text:"Debes agregar contenido por lo menos.",className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!0;await v.save().then(A=>A).then(A=>{N=A}).catch(A=>{console.log("Saving failed: ",A)});let O=document.querySelector("#updateChapter form"),C=new FormData(O),w=C.get("name"),h=C.get("slug"),L=C.get("chaptertype"),_=C.get("price"),M=C.get("disk");C.append("content",JSON.stringify(N));let k=C.get("content");await axios.patch(route("chapters.update",[s.id]),{name:w,slug:h,price:_,type:L,disk:M,content:k},{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(A){let q=A.data;if(q.excluded&&q.excluded.forEach(I=>{Toastify({text:I,className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"bottom",position:"right"}).showToast()}),A.data.status=="success"){Toastify({text:A.data.msg,className:"success",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let $=document.querySelector("#m-"+e+" .name"),I=A.data.item;$.textContent=I.name}else A.data.status=="error"&&Toastify({text:A.data.msg,className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"bottom",position:"right"}).showToast();console.log(A)}).catch(function(A){console.log("error: ",A)})})}}).catch(function(a){console.log(a)})});function ra(){let n=document.getElementById("updateChapter");n.addClass("clg"),n.removeClass("opn"),setTimeout(()=>{n.remove()},300),Ne()}function Xe(n,e,t){Oe();let a=document.querySelector("#updateChapter.modal-chapter .md-content form .upload input:checked").value;axios.post(route("subirChapter.imagenes",[e]),{images:n,chapterid:t,disk:a},{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"multipart/form-data"}}).then(function(l){console.log(l),Toastify({text:l.data.msg,className:"success",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast()}).catch(function(l){console.log("error: ",l)});let s=document.querySelector("#u-preview"),o=document.querySelector("#u-preview .item:last-of-type"),i;o?i=Number(o.getAttribute("index"))+1:i=0;for(let l=0;l<n.length;l++){let r=URL.createObjectURL(n[l]),d=document.createElement("div"),p=i+l;d.addClass("item"),d.setAttribute("id","image-"+p),d.setAttribute("index",p),d.innerHTML=`
            <img src="${r}" alt="preview" />
            <div class="u-remove" data-index="${p}">
                <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
            </div>
        `,s.append(d)}}const Ze=document.querySelector(".fm-manga > form");if(Ze){Ze.addEventListener("submit",function(e){la()||e.preventDefault()});let n=document.querySelector("#ch-date");n&&new AirDatepicker(n,{locale:localeEs,dateFormat:"yyyy-MM-dd"})}function la(){let n=document.querySelector(".fm-manga > form #m-name"),e=document.querySelector(".fm-manga > form #m-slug");document.querySelector(".fm-manga > form #m-altname"),document.querySelector(".fm-manga > form #m-description");let t=document.querySelector(".fm-manga > form #m-image");document.querySelector(".fm-manga > form #m-published");let a=document.querySelector(".fm-manga > form .categories .choices"),s=document.querySelector(".fm-manga > form .categories .choices .choices__input");if(document.querySelector(".fm-manga > form .tags .choices"),document.querySelector(".fm-manga > form .tags .choices .choices__input"),document.querySelector(".fm-manga > form #m-bookstatus"),document.querySelector(".fm-manga > form #m-demography"),n&&n.value=="")return n.focus(),n.addClass("error"),Toastify({text:"Campo nombre requerido",className:"error",duration:2e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!1;if(n&&n.removeClass("error"),e&&e.value=="")return e.focus(),e.addClass("error"),Toastify({text:"Campo slug requerido",className:"error",duration:2e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!1;if(e&&e.removeClass("error"),t&&t.value==""){let o=document.querySelector(".fm-manga > form .dropzone #choose");return o.addClass("error"),setTimeout(()=>{o.removeClass("error")},1e3),Toastify({text:"Imagen destacada es requerida",className:"error",duration:2e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!1}else t&&t.removeClass("error");return a&&s.value==""?(s.focus(),a.addClass("error"),Toastify({text:"Campo descripcion requerido",className:"error",duration:2e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),!1):(a&&a.removeClass("error"),!0)}document.addEventListener("click",function(n){if(!n.target.matches(".mangaTypeDelete"))return;n.preventDefault();let e=n.target.getAttribute("data-id");B.fire({type:"warning",title:"Seguro que deseas eliminar?",text:"No podrs revertir esto!",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.confirmed&&axios.delete(route("manga_types.destroy",[e]),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(a){Toastify({text:a.data.msg,className:"success",duration:1e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let s=document.querySelector(".alertify"),o=document.querySelector(".al-overlay");B.close(s,o),setTimeout(()=>{window.location.href=route("manga_types.index")},1e3)}).catch(function(a){console.log(a)})}).catch(t=>{console.log(t)})});document.addEventListener("click",function(n){if(!n.target.matches(".mangaStatusDelete"))return;n.preventDefault();let e=n.target.getAttribute("data-id");B.fire({type:"warning",title:"Seguro que deseas eliminar?",text:"No podrs revertir esto!",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.confirmed&&axios.delete(route("manga_book_status.destroy",[e]),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(a){Toastify({text:a.data.msg,className:"success",duration:1e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let s=document.querySelector(".alertify"),o=document.querySelector(".al-overlay");B.close(s,o),setTimeout(()=>{window.location.href=route("manga_book_status.index")},1e3)}).catch(function(a){console.log(a)})}).catch(t=>{console.log(t)})});document.addEventListener("click",function(n){if(!n.target.matches(".mangaDemographyDelete"))return;n.preventDefault();let e=n.target.getAttribute("data-id");B.fire({type:"warning",title:"Seguro que deseas eliminar?",text:"No podrs revertir esto!",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.confirmed&&axios.delete(route("manga_demography.destroy",[e]),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(a){Toastify({text:a.data.msg,className:"success",duration:1e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let s=document.querySelector(".alertify"),o=document.querySelector(".al-overlay");B.close(s,o),setTimeout(()=>{window.location.href=route("manga_demography.index")},1e3)}).catch(function(a){console.log(a)})}).catch(t=>{console.log(t)})});document.addEventListener("click",function(n){if(!n.target.matches(".categoriesDelete"))return;n.preventDefault();let e=n.target.getAttribute("data-id");B.fire({type:"warning",title:"Seguro que deseas eliminar?",text:"No podrs revertir esto!",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.confirmed&&axios.delete(route("categories.destroy",[e]),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(a){Toastify({text:a.data.msg,className:"success",duration:1e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let s=document.querySelector(".alertify"),o=document.querySelector(".al-overlay");B.close(s,o),setTimeout(()=>{window.location.href=route("categories.index")},1e3)}).catch(function(a){console.log(a)})}).catch(t=>{console.log(t)})});document.addEventListener("click",function(n){if(!n.target.matches(".tagsDelete"))return;n.preventDefault();let e=n.target.getAttribute("data-id");B.fire({type:"warning",title:"Seguro que deseas eliminar?",text:"No podrs revertir esto!",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.confirmed&&axios.delete(route("tags.destroy",[e]),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(a){Toastify({text:a.data.msg,className:"success",duration:1e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let s=document.querySelector(".alertify"),o=document.querySelector(".al-overlay");B.close(s,o),setTimeout(()=>{window.location.href=route("tags.index")},1e3)}).catch(function(a){console.log(a)})}).catch(t=>{console.log(t)})});let Ke=new pe;const F=n=>{Toastify({text:n,className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast()},xe=document.querySelector(".form:not(.update) form#formUser");let se=document.querySelector('#formUser .group input[name="password"]');const R={letter:document.querySelector(".password-validation #letter"),capital:document.querySelector(".password-validation #capital"),number:document.querySelector(".password-validation #number"),length:document.querySelector(".password-validation #length")};let X=!1;se&&se.addEventListener("keyup",function(){let n=/[a-z]/g;se.value.match(n)?(R.letter.removeClass("invalid"),R.letter.addClass("valid"),X=!0):(R.letter.removeClass("valid"),R.letter.addClass("invalid"),X=!1);let e=/[A-Z]/g;se.value.match(e)?(R.capital.removeClass("invalid"),R.capital.addClass("valid"),X=!0):(R.capital.removeClass("valid"),R.capital.addClass("invalid"),X=!1);let t=/[0-9]/g;se.value.match(t)?(R.number.removeClass("invalid"),R.number.addClass("valid"),X=!0):(R.number.removeClass("valid"),R.number.addClass("invalid"),X=!1),se.value.length>=8?(R.length.removeClass("invalid"),R.length.addClass("valid"),X=!0):(R.length.removeClass("valid"),R.length.addClass("invalid"),X=!1)});const da=/[^a-zA-Z0-9]+/g;let Se=document.querySelector('#formUser .group input[name="username"]');Se&&Se.addEventListener("input",function(n){let e=n.target.value;Se.value=e.replace(da,"")});const Ge=document.querySelectorAll(".avatares .list .item:not(#userAvatar) input");Ge&&Ge.forEach(n=>{n.addEventListener("change",e=>{const t=document.querySelector(".avatares .list .item#avatar");t&&t.removeClass("selected")})});document.addEventListener("click",function(n){if(!n.target.matches(".avatares .list .item#avatar"))return;n.preventDefault();const e=document.querySelector(".avatares .list .item input:checked");e&&(e.checked=!1),n.target.addClass("selected")});const et=async n=>{let e=new FormData,t;return e.append("avatar",n),await Ae.post(route("validateAvatar.store"),e,{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(a){const{data:s,data:{status:o,msg:i}}=a;if(o==="error"){for(let l of i)F(l);return t=!1,!1}t=!0}).catch(function(a){console.log("error: ",a)}),t},ca=function(n){const e=document.querySelector(n);let t;e&&(t=e.nextElementSibling,t.addEventListener("change",function(a){const s=a.target.files,o={...s};et(s[0]).then(i=>{i&&tt(o)}),t.value=""}),e.addEventListener("click",()=>t.click()),e.addEventListener("dragover",a=>{a.preventDefault()}),e.addEventListener("drop",a=>{a.preventDefault();const s=a.dataTransfer.files,o={...s};et(s[0]).then(i=>{i&&tt(o)}),t.value=""}))};ca("#userAvatar #choose");function tt(n){ua();const e=document.querySelector(".avatares .list"),t=URL.createObjectURL(n[0]),a=document.createElement("div"),s=document.querySelector(".avatares .list .item input:checked");s&&(s.checked=!1),a.addClass("item selected"),a.setAttribute("id","avatar"),a.innerHTML=`
        <div class="avatar">
            <img src="${t}" alt="avatar">
			<input type="file" name="avatar_file" accept="image/jpg,image/png,image/jpeg,image/gif" hidden>
        </div>
    `,e.append(a);const o=new DataTransfer,i=document.querySelector(".avatares #avatar input");o.items.add(n[0]),i.files=o.files}function ua(){const n=document.querySelector(".avatares #avatar");n&&n.remove()}const ce=document.querySelector("#formUser .cover input");ce&&ce.addEventListener("input",ha);function ha(n){const e=document.querySelector("#formUser .cover .preview img"),t=n.target.value;if(e.removeClass("show"),!ut(t))return!1;e.src=t,e.onload=s=>{},e.onerror=s=>{F("Imagen invalida o enlace roto")};const a=s=>new Promise((o,i)=>{const l=new Image;l.onload=()=>o(l),l.onerror=r=>i(r),l.src=s});(async()=>{const s=await a(t);let o=!0;if(s.naturalWidth>1920&&(F("El ancho maximo es 1920"),ce.setAttribute("data-validated",!1),o=!1),s.naturalHeight>548&&(F("El alto maximo es 548"),ce.setAttribute("data-validated",!1),o=!1),!o)return!1;e.addClass("show"),ce.setAttribute("data-validated",!0)})()}const J={list:document.querySelector("#formUser .redes .list"),listInputs:document.querySelectorAll("#formUser .redes .list .item:not(.add) input"),addInput:document.querySelector("#formUser .redes .list .add input")};J.listInputs&&J.listInputs.forEach(n=>{n.addEventListener("input",()=>{n.value===""?(F("Campo requerido"),n.focus(),n.addClass("error")):n.removeClass("error")})});document.addEventListener("click",function(n){if(!n.target.matches("#formUser .redes .list .add .new"))return;n.preventDefault();let e=J.addInput.value,t=Date.now();if(e==="")return F("Campo requerido"),J.addInput.focus(),J.addInput.addClass("error"),!1;if(J.addInput.removeClass("error"),ut(e))J.addInput.removeClass("error");else return F("Debes insertar un enlace valido"),J.addInput.focus(),J.addInput.addClass("error"),!1;let a=document.createElement("div");a.addClass("item"),a.setAttribute("id",`i-${t}`),a.innerHTML=`
		<div class="icon">
			<svg width="28px" height="28px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
				<circle cx="12" cy="12" r="8" stroke="#fff" stroke-width="2"/>
				<path d="M18.572 7.20637C17.8483 8.05353 16.8869 8.74862 15.7672 9.23422C14.6475 9.71983 13.4017 9.98201 12.1326 9.99911C10.8636 10.0162 9.60778 9.78773 8.4689 9.33256C7.33002 8.87739 6.34077 8.20858 5.58288 7.38139" stroke="#fff" stroke-width="2"/>
				<path d="M18.572 16.7936C17.8483 15.9465 16.8869 15.2514 15.7672 14.7658C14.6475 14.2802 13.4017 14.018 12.1326 14.0009C10.8636 13.9838 9.60778 14.2123 8.4689 14.6674C7.33002 15.1226 6.34077 15.7914 5.58288 16.6186" stroke="#fff" stroke-width="2"/>
				<path d="M12 4V20" stroke="#fff" stroke-width="2"/>
			</svg>
		</div>
		<input type="text" name="redes[]" value="${e}">
		<div class="action">
			<button class="delete" data-id="i-${t}">
				<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
					<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
					<line x1="4" y1="7" x2="20" y2="7" />
					<line x1="10" y1="11" x2="10" y2="17" />
					<line x1="14" y1="11" x2="14" y2="17" />
					<path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
					<path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
				</svg>
			</button>
		</div>
	`,J.list.append(a),J.addInput.value=""});document.addEventListener("click",function(n){if(!n.target.matches("#formUser .redes .list .item .delete"))return;n.preventDefault();let e=n.target.getAttribute("data-id");document.querySelector(`#${e}`).remove()});xe&&xe.addEventListener("submit",async function(n){if(n.preventDefault(),!ma())return!1;const t=new FormData(this);await Ae.post(xe.action,t,{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"multipart/form-data"}}).then(function(a){const{data:{success:s}}=a;s.status===200&&(Toastify({text:"Usuario creado correctamente",className:"success",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast(),setTimeout(()=>{window.location.href=route("users.index")},1e3)),console.log(a)}).catch(function(a){console.log(a)})});const at=document.querySelector(".frmo.update form#formUser");at&&at.addEventListener("submit",async function(n){if(!pa())return n.preventDefault(),!1});function ma(n){let e=document.querySelector('#formUser .group input[name="username"]');if(e&&e.value=="")return F("Nombre de usuario es requerido"),e.focus(),!1;let t=document.querySelector('#formUser .group input[name="email"]');if(t&&t.value=="")return F("Correo es requerido"),t.focus(),!1;if(!ht(t.value))return F("Email invalido"),!1;let a=document.querySelector('#formUser .group input[name="password"]'),s=document.querySelector('#formUser .group input[name="password_confirmation"]');if(a&&a.value=="")return F("Contrasea es requerida"),a.focus(),!1;if(!X)return F("Contrasea invalida"),!1;if(s&&s.value=="")return F("Confirmar Contrasea es requerido"),s.focus(),!1;if(a.value!=s.value)return F("Las contraseas deben coincidir"),s.focus(),!1;let o=document.querySelector("#formUser .cover input");return o.value!=""&&o.dataset.validated==="false"&&(o.value=""),!0}function pa(n){let e=document.querySelector('#formUser .group input[name="username"]');if(e&&e.value=="")return F("Nombre de usuario es requerido"),e.focus(),!1;let t=document.querySelector('#formUser .group input[name="email"]');if(t&&t.value=="")return F("Correo es requerido"),t.focus(),!1;if(!ht(t.value))return F("Email invalido"),!1;let a=document.querySelector("#formUser .cover input");return a.value!=""&&a.dataset.validated==="false"&&(a.value=""),!0}document.addEventListener("click",function(n){if(!n.target.matches(".userDelete"))return;n.preventDefault();let e=n.target.getAttribute("data-id");Ke.fire({type:"warning",title:"Seguro que deseas eliminar?",text:"No podrs revertir esto!",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.confirmed&&Ae.delete(route("users.destroy",[e]),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(a){Toastify({text:a.data.msg,className:"success",duration:1e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let s=document.querySelector(".alertify"),o=document.querySelector(".al-overlay");Ke.close(s,o),setTimeout(()=>{window.location.href=route("users.index")},1e3)}).catch(function(a){console.log(a)})}).catch(t=>{console.log(t)})});let nt=new pe;document.addEventListener("click",function(n){if(!n.target.matches(".permissionDelete"))return;n.preventDefault();let e=n.target.getAttribute("data-id");nt.fire({type:"warning",title:"Seguro que deseas eliminar?",text:"No podrs revertir esto!",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.confirmed&&axios.delete(route("permissions.destroy",[e]),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(a){Toastify({text:a.data.msg,className:"success",duration:1e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let s=document.querySelector(".alertify"),o=document.querySelector(".al-overlay");nt.close(s,o),setTimeout(()=>{window.location.href=route("permissions.index")},1e3)}).catch(function(a){console.log(a)})}).catch(t=>{console.log(t)})});let st=new pe;document.addEventListener("click",function(n){if(!n.target.matches(".roleDelete"))return;n.preventDefault();let e=n.target.getAttribute("data-id");st.fire({type:"warning",title:"Seguro que deseas eliminar?",text:"No podrs revertir esto!",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.confirmed&&axios.delete(route("roles.destroy",[e]),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(a){Toastify({text:a.data.msg,className:"success",duration:1e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast();let s=document.querySelector(".alertify"),o=document.querySelector(".al-overlay");st.close(s,o),setTimeout(()=>{window.location.href=route("roles.index")},1e3)}).catch(function(a){console.log(a)})}).catch(t=>{console.log(t)})});let ot=document.querySelector("#administrarPermisos"),it=document.querySelector("#cerrarAdministrarPermisos"),me=document.querySelector(".group.permisos .md-permissions");ot&&ot.addEventListener("click",function(){me&&(me.style.display="block")});it&&it.addEventListener("click",function(){me&&(me.style.display="none")});let fa=document.querySelector(".table");fa&&new ta("#tablr",{perPage:15,labels:{placeholder:"Buscar...",searchTitle:"Buscar dentro de la tabla",perPage:"Elementos por pgina",noRows:"No hay elementos",info:"Mostrando {start} a {end} de {rows} elementos",noResults:"Ningn resultado coincide con su consulta de bsqueda"}});const rt=document.querySelector(".template-1 form.form");if(rt){let n=/[^a-zA-Z0-9]+/g,e=document.querySelector('.template-1 form input[name="name"]'),t=document.querySelector('.template-1 form input[name="slug"]');e.addEventListener("input",function(a){let s=a.target.value;t.value=s.replace(n,"-").toLowerCase()}),t&&t.addEventListener("input",function(a){let s=a.target.value;t.value=s.replace(n,"-").toLowerCase()}),rt.addEventListener("submit",function(a){e=document.querySelector('.template-1 form input[name="name"]'),t=document.querySelector('.template-1 form input[name="slug"]'),e&&e.value==""?(a.preventDefault(),e.focus(),e.addClass("error"),Toastify({text:"Campo nombre requerido",className:"error",duration:2e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast()):e&&e.removeClass("error"),t&&t.value==""?(a.preventDefault(),t.focus(),t.addClass("error"),Toastify({text:"Campo slug requerido",className:"error",duration:2e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast()):t&&t.removeClass("error")})}
