import{a as b}from"./axios-4a70c6fc.js";import{i as S}from"./helpers-27e9ade0.js";import{r as i,a as o}from"./helpers-cf980081.js";const c=e=>{Toastify({text:e,className:"error",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"center"}).showToast()},h=document.querySelectorAll(".form__avatares .list .item:not(#userAvatar) input");h&&h.forEach(e=>{e.addEventListener("change",t=>{const a=document.querySelector(".form__avatares .list .item#avatar");a&&i(a,"selected")})});document.addEventListener("click",function(e){if(!e.target.matches(".form__avatares .list .item#avatar"))return;e.preventDefault();const t=document.querySelector(".form__avatares .list .item input:checked");t&&(t.checked=!1),o(e.target,"selected")});const w=async e=>{let t=new FormData,a;return t.append("avatar",e),await b.post("/users/validate-avatar",t,{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(function(r){const{data:s,data:{status:l,msg:u}}=r;if(l==="error"){for(let _ of u)c(_);return a=!1,!1}a=!0}).catch(function(r){console.log("error: ",r)}),a},E=function(e){const t=document.querySelector(e);let a;t&&(a=t.nextElementSibling,a.addEventListener("change",function(r){const s=r.target.files,l={...s};w(s[0]).then(u=>{u&&g(l)}),a.value=""}),t.addEventListener("click",()=>a.click()),t.addEventListener("dragover",r=>{r.preventDefault()}),t.addEventListener("drop",r=>{r.preventDefault();const s=r.dataTransfer.files,l={...s};w(s[0]).then(u=>{u&&g(l)}),a.value=""}))};E("#userAvatar #choose");function g(e){I();const t=document.querySelector(".form__avatares .list"),a=URL.createObjectURL(e[0]),r=document.createElement("div"),s=document.querySelector(".form__avatares .list .item input:checked");s&&(s.checked=!1),o(r,"item selected"),r.setAttribute("id","avatar"),r.innerHTML=`
        <div class="avatar">
            <img src="${a}" alt="avatar">
			<input type="file" name="avatar_file" accept="image/jpg,image/png,image/jpeg,image/gif" hidden>
        </div>
    `,t.append(r);const l=new DataTransfer,u=document.querySelector(".form__avatares #avatar input");l.items.add(e[0]),u.files=l.files}function I(){const e=document.querySelector(".form__avatares #avatar");e&&e.remove()}const v=document.querySelector(".account__form .form__cover input");v&&v.addEventListener("input",x);async function x(e){const t=document.querySelector(".account__form .form__cover .preview img"),a=e.target.value;if(i(t,"show"),!S(a))return!1;t.src=a,t.onload=u=>{},t.onerror=u=>{c("Imagen invalida o enlace roto")};const s=await(u=>new Promise((_,k)=>{const p=new Image;p.onload=()=>_(p),p.onerror=C=>k(C),p.src=u}))(a);let l=!0;if(s.naturalWidth>1920&&(c("El ancho maximo es 1920"),v.setAttribute("data-validated",!1),l=!1),s.naturalHeight>548&&(c("El alto maximo es 548"),v.setAttribute("data-validated",!1),l=!1),!l)return!1;o(t,"show"),v.setAttribute("data-validated",!0)}const d={list:document.querySelector(".account__form .form__redes .list"),listInputs:document.querySelectorAll(".account__form .form__redes .list .item:not(.add) input"),addInput:document.querySelector(".account__form .form__redes .list .add input")};d.listInputs&&d.listInputs.forEach(e=>{e.addEventListener("input",()=>{e.value===""?(c("Campo requerido"),e.focus(),o(e,"error")):i(e,"error")})});document.addEventListener("click",function(e){if(!e.target.matches(".account__form .form__redes .list .add .new"))return;e.preventDefault();let t=d.addInput.value,a=Date.now();if(t==="")return c("Campo requerido"),d.addInput.focus(),o(d.addInput,"error"),!1;if(i(d.addInput,"error"),S(t))i(d.addInput,"error");else return c("Debes insertar un enlace valido"),d.addInput.focus(),o(d.addInput,"error"),!1;let r=document.createElement("div");o(r,"item"),r.setAttribute("id",`i-${a}`),r.innerHTML=`
		<div class="icon">
			<svg width="28px" height="28px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
				<circle cx="12" cy="12" r="8" stroke="#fff" stroke-width="2"/>
				<path d="M18.572 7.20637C17.8483 8.05353 16.8869 8.74862 15.7672 9.23422C14.6475 9.71983 13.4017 9.98201 12.1326 9.99911C10.8636 10.0162 9.60778 9.78773 8.4689 9.33256C7.33002 8.87739 6.34077 8.20858 5.58288 7.38139" stroke="#fff" stroke-width="2"/>
				<path d="M18.572 16.7936C17.8483 15.9465 16.8869 15.2514 15.7672 14.7658C14.6475 14.2802 13.4017 14.018 12.1326 14.0009C10.8636 13.9838 9.60778 14.2123 8.4689 14.6674C7.33002 15.1226 6.34077 15.7914 5.58288 16.6186" stroke="#fff" stroke-width="2"/>
				<path d="M12 4V20" stroke="#fff" stroke-width="2"/>
			</svg>
		</div>
		<input type="text" name="redes[]" value="${t}">
		<div class="action">
			<button class="delete" data-id="i-${a}">
				<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
					<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
					<line x1="4" y1="7" x2="20" y2="7" />
					<line x1="10" y1="11" x2="10" y2="17" />
					<line x1="14" y1="11" x2="14" y2="17" />
					<path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
					<path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
				</svg>
			</button>
		</div>
	`,d.list.append(r),d.addInput.value=""});document.addEventListener("click",function(e){if(!e.target.matches(".account__form .form__redes .list .item .delete"))return;e.preventDefault();let t=e.target.getAttribute("data-id");document.querySelector(`#${t}`).remove()});const y=document.querySelector(".account__change__password form");y&&y.addEventListener("submit",async function(e){A()});function A(){let e=document.querySelector(".account__form .form__cover input");return e.value!=""&&e.dataset.validated==="false"&&(e.value=""),!0}const q=document.querySelector(".account__change__password form");q&&q.addEventListener("submit",async function(e){if(!L())return e.preventDefault(),!1});function L(){let e=document.querySelector('.account__change__password form .form__item input[name="current_password"]'),t=document.querySelector('.account__change__password form .form__item input[name="password"]'),a=document.querySelector('.account__change__password form .form__item input[name="password_confirmation"]');return e&&e.value==""?(c("Contraseña actual es requerida"),e.focus(),!1):t&&t.value==""?(c("Contraseña nueva es requerida"),t.focus(),!1):!f&&!f?(c("Contraseña invalida"),!1):a&&a.value==""?(c("Confirmar nueva contraseña es requerido"),a.focus(),!1):t.value!=a.value?(c("Las contraseñas deben coincidir"),a.focus(),!1):!0}let m=document.querySelector('.account__change__password form .form__item input[name="password"]');const n={letter:document.querySelector(".password__validation #letter"),capital:document.querySelector(".password__validation #capital"),number:document.querySelector(".password__validation #number"),length:document.querySelector(".password__validation #length")};let f=!1;m&&m.addEventListener("keyup",function(){let e=/[a-z]/g;m.value.match(e)?(i(n.letter,"invalid"),o(n.letter,"valid"),f=!0):(i(n.letter,"valid"),o(n.letter,"invalid"),f=!1);let t=/[A-Z]/g;m.value.match(t)?(i(n.capital,"invalid"),o(n.capital,"valid"),f=!0):(i(n.capital,"valid"),o(n.capital,"invalid"),f=!1);let a=/[0-9]/g;m.value.match(a)?(i(n.number,"invalid"),o(n.number,"valid"),f=!0):(i(n.number,"valid"),o(n.number,"invalid"),f=!1),m.value.length>=8?(i(n.length,"invalid"),o(n.length,"valid"),f=!0):(i(n.length,"valid"),o(n.length,"invalid"),f=!1)});
